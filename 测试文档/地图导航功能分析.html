<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°å›¾å¯¼èˆªåŠŸèƒ½åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            color: #333;
            background-color: #f8f9fa;
        }        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 0.8s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        h2, h3 {
            animation: slideInLeft 0.6s ease-out;
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        h1 {
            color: #0066cc;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeaea;
            margin-bottom: 30px;
        }
        h2 {
            color: #0055aa;
            margin-top: 30px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eaeaea;
        }
        h3 {
            color: #0077cc;
            margin-top: 25px;
        }
        code {
            background-color: #f8f9fa;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: Consolas, monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #0066cc;
        }        .mermaid {
            margin: 20px auto;
            text-align: center;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 100%;
            overflow-x: auto;
        }
        
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        table, th, td {
            border: 1px solid #e0e0e0;
        }
        th {
            background: linear-gradient(135deg, #0066cc, #004d99);
            color: white;
            text-align: left;
            padding: 12px 10px;
            font-weight: bold;
        }
        td {
            padding: 10px;
            transition: background-color 0.3s ease;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tr:hover {
            background-color: #e3f2fd;
        }
        .highlight {
            background-color: #ffffcc;
            padding: 2px;
        }        .note {
            background: linear-gradient(135deg, #e8f4fd, #f0f8ff);
            border-left: 4px solid #0077cc;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
        }
        .note::before {
            content: "ğŸ’¡";
            position: absolute;
            left: -12px;
            top: 15px;
            background: #0077cc;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .complexity-table {
            width: 100%;
            margin: 20px 0;
        }
        .complexity-table th {
            background-color: #0066cc;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>åœ°å›¾å¯¼èˆªåŠŸèƒ½åˆ†ææŠ¥å‘Š</h1>

        <h2>1. å¯¼èˆªåŠŸèƒ½æ¦‚è¿°</h2>
        <p>åœ°å›¾å¯¼èˆªåŠŸèƒ½æ˜¯ä¸ªæ€§åŒ–æ—…æ¸¸ç³»ç»Ÿä¸­çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå…è®¸ç”¨æˆ·åœ¨åœ°å›¾ä¸Šé€‰æ‹©èµ·ç‚¹ã€ç»ˆç‚¹åŠå¯é€‰çš„é€”ç»ç‚¹ï¼Œç³»ç»Ÿè®¡ç®—å¹¶å±•ç¤ºæœ€ä¼˜è·¯å¾„ã€‚è¯¥åŠŸèƒ½æ”¯æŒå¤šç§å¯¼èˆªç­–ç•¥ï¼ŒåŒ…æ‹¬æœ€çŸ­è·ç¦»è·¯å¾„ã€æœ€çŸ­æ—¶é—´è·¯å¾„ï¼Œä»¥åŠè€ƒè™‘äº¤é€šå·¥å…·çš„è·¯å¾„è§„åˆ’ã€‚</p>        <div class="mermaid">
        flowchart LR
            A[ğŸ—ºï¸ ç”¨æˆ·é€‰æ‹©å¯¼èˆªç‚¹] -->|POST| B[ğŸ“ å‘é€åæ ‡]
            B --> C{é€‰æ‹©å¯¼èˆªæ–¹å¼}
            C -->|æœ€çŸ­è·ç¦»| D[ğŸ“ distance]
            C -->|æœ€çŸ­æ—¶é—´| E[â±ï¸ time]
            D --> F[ğŸš¶ æ˜¯å¦ç”¨äº¤é€šå·¥å…·]
            E --> F
            F -->|éªŒè¯| G{ğŸ“‹ æ•°æ®æ ¼å¼æ­£ç¡®?}
            G -->|âŒ| H[âš ï¸ è¿”å›é”™è¯¯]
            G -->|âœ…| I[ğŸ” è°ƒç”¨åœ°å›¾æ¨¡å—]
            I --> J[ğŸ—ºï¸ æ„å»ºOSMåœ°å›¾]
            J --> K[ğŸš¦ è®¡ç®—æ‹¥æŒ¤åº¦]
            K --> L[ğŸ¯ Dijkstraç®—æ³•]
            L --> M[ğŸ“Š æ„é€ è·¯å¾„å“åº”]
            M -->|JSON| N[ğŸ–¥ï¸ å‰ç«¯æ˜¾ç¤º]
            
            style A fill:#e1f5fe
            style C fill:#fff3e0
            style G fill:#fff3e0
            style L fill:#f3e5f5
            style N fill:#e8f5e8
        </flowchart>
        </div>

        <h2>2. å¯¼èˆªå¤„ç†æµç¨‹</h2>
        <p>å¯¼èˆªåŠŸèƒ½çš„å¤„ç†æµç¨‹ä»å‰ç«¯ç”¨æˆ·è¯·æ±‚å¼€å§‹ï¼Œç»è¿‡åç«¯éªŒè¯å’Œè·¯å¾„è§„åˆ’ï¼Œæœ€ç»ˆè¿”å›ä¼˜åŒ–åçš„è·¯å¾„ã€‚</p>

        <h3>2.1 è¯·æ±‚æ¥æ”¶ä¸æ•°æ®éªŒè¯</h3>
        <p>ç³»ç»Ÿé¦–å…ˆæ¥æ”¶å‰ç«¯çš„POSTè¯·æ±‚ï¼Œè¯¥è¯·æ±‚åŒ…å«å¯¼èˆªç‚¹çš„åæ ‡ä¿¡æ¯åŠå¯¼èˆªç­–ç•¥ï¼š</p>
        <pre><code>{
    "points": [
        {"lat": çº¬åº¦1, "lng": ç»åº¦1}, // èµ·ç‚¹
        {"lat": çº¬åº¦2, "lng": ç»åº¦2}, // ç»ˆç‚¹æˆ–é€”å¾„ç‚¹
        ...
    ],
    "method": "distance" | "time", // å¯¼èˆªæ–¹æ³•
    "use_vehicle": true | false   // æ˜¯å¦ä½¿ç”¨äº¤é€šå·¥å…·
}</code></pre>

        <p>åç«¯é¦–å…ˆéªŒè¯è¯·æ±‚æ•°æ®çš„å®Œæ•´æ€§å’Œæ ¼å¼æ­£ç¡®æ€§ï¼Œç¡®ä¿è‡³å°‘æä¾›äº†ä¸¤ä¸ªæœ‰æ•ˆçš„åæ ‡ç‚¹ã€‚</p>

        <h3>2.2 å¯¼èˆªæ–¹æ³•å¤„ç†</h3>
        <p>ç³»ç»Ÿæ ¹æ®è¯·æ±‚ä¸­çš„å¯¼èˆªæ–¹æ³•å‚æ•°ï¼Œé€‰æ‹©ç›¸åº”çš„è·¯å¾„è§„åˆ’ç­–ç•¥ï¼š</p>        <div class="mermaid">
        flowchart LR
            A[ğŸ“¥ å¯¼èˆªè¯·æ±‚] --> B{ğŸ“‹ éªŒè¯å‚æ•°}
            B -->|âŒ æ— æ•ˆ| C[âš ï¸ è¿”å›é”™è¯¯]
            B -->|âœ… æœ‰æ•ˆ| D{ğŸ”€ é€‰æ‹©æ–¹æ³•}
            D -->|ğŸ“ distance| E[ğŸ“ æœ€çŸ­è·ç¦»è§„åˆ’]
            D -->|â±ï¸ time| F[ğŸš— æœ€çŸ­æ—¶é—´è§„åˆ’]
            D -->|ğŸ”„ å…¶ä»–| G[ğŸ“ é»˜è®¤æœ€çŸ­è·ç¦»]
            E --> H[ğŸ“Š è¿”å›è·¯å¾„ç»“æœ]
            F --> H
            G --> H
            
            style A fill:#e3f2fd
            style B fill:#fff8e1
            style D fill:#fff8e1
            style H fill:#e8f5e8
        </flowchart>
        </div>

        <h2>3. ä¸åŒå¯¼èˆªæ–¹æ³•çš„å¤„ç†</h2>

        <h3>3.1 æœ€çŸ­è·ç¦»å¯¼èˆª</h3>
        <p>æœ€çŸ­è·ç¦»å¯¼èˆªä¾§é‡äºæ‰¾åˆ°è¿æ¥æ‰€æœ‰å¯¼èˆªç‚¹çš„æœ€çŸ­ç‰©ç†è·ç¦»è·¯å¾„ï¼Œä¸è€ƒè™‘äº¤é€šçŠ¶å†µæˆ–é“è·¯ç±»å‹ã€‚</p>
        <ul>
            <li>ä½¿ç”¨Dijkstraç®—æ³•è®¡ç®—èŠ‚ç‚¹é—´çš„æœ€çŸ­è·¯å¾„</li>
            <li>è¾¹æƒé‡ç›´æ¥ä½¿ç”¨ç‰©ç†è·ç¦»</li>
            <li>è¿”å›æ€»è·ç¦»(ç±³)å’Œè·¯å¾„åæ ‡ç‚¹</li>
        </ul>

        <h3>3.2 æœ€çŸ­æ—¶é—´å¯¼èˆª</h3>
        <p>æœ€çŸ­æ—¶é—´å¯¼èˆªè€ƒè™‘é“è·¯ç±»å‹ã€æ‹¥æŒ¤åº¦å’Œäº¤é€šå·¥å…·ï¼Œè®¡ç®—æ—¶é—´æœ€çŸ­çš„è·¯å¾„ã€‚</p>
        <ul>
            <li>è¾¹æƒé‡åŸºäºè·¯æ®µé•¿åº¦ã€é“è·¯ç±»å‹ã€æ‹¥æŒ¤åº¦å’Œé€Ÿåº¦è®¡ç®—</li>
            <li>å¯¹äºä¸åŒçš„é“è·¯ç±»å‹ï¼Œåº”ç”¨ä¸åŒçš„åŸºç¡€é€Ÿåº¦</li>
            <li>è€ƒè™‘æ‹¥æŒ¤åº¦çš„å½±å“ï¼Œè®¡ç®—è¡Œè¿›æ—¶é—´</li>
            <li>è¿”å›é¢„è®¡æ—¶é—´(ç§’)å’Œè·¯å¾„åæ ‡ç‚¹</li>
        </ul>

        <div class="note">
            <strong>æ³¨æ„ï¼š</strong>å½“ä½¿ç”¨äº¤é€šå·¥å…·æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®é“è·¯ç±»å‹åº”ç”¨ä¸åŒçš„è¡Œè¿›é€Ÿåº¦ã€‚ä¾‹å¦‚ï¼Œé«˜é€Ÿå…¬è·¯ä¸º80km/hï¼Œä½å®…åŒºé“è·¯ä¸º30km/hï¼Œäººè¡Œé“ä¸º5km/hç­‰ã€‚
        </div>

        <h2>4. å›¾ç»“æ„ä¸åœ°å›¾æ„å»º</h2>

        <h3>4.1 åœ°å›¾æ•°æ®å¯¼å…¥</h3>
        <p>ç³»ç»Ÿä½¿ç”¨OpenStreetMap(OSM)æ•°æ®ä½œä¸ºåœ°å›¾æ•°æ®æºï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤æ„å»ºå›¾ç»“æ„ï¼š</p>
        <ol>
            <li>ä»OSMæ–‡ä»¶åŠ è½½åœ°ç†æ•°æ®</li>
            <li>æ„å»ºå›¾è¡¨ç¤ºï¼ŒèŠ‚ç‚¹è¡¨ç¤ºåœ°ç†ç‚¹ï¼Œè¾¹è¡¨ç¤ºè¿æ¥èŠ‚ç‚¹çš„é“è·¯</li>
            <li>ä¸ºå›¾çš„æ¯æ¡è¾¹æ·»åŠ å±æ€§ï¼Œå¦‚é•¿åº¦ã€é“è·¯ç±»å‹ç­‰</li>
            <li>åˆå§‹åŒ–äº¤é€šçŠ¶å†µï¼Œä¸ºæ¯æ¡è¾¹ç”Ÿæˆæ‹¥æŒ¤åº¦</li>
        </ol>

        <h3>4.2 å›¾ç»“æ„</h3>
        <p>ç³»ç»Ÿä½¿ç”¨æœ‰å‘å›¾(DiGraph)è¡¨ç¤ºåœ°å›¾ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
        <ul>
            <li>èŠ‚ç‚¹(Nodes)ï¼šè¡¨ç¤ºåœ°ç†ä½ç½®ç‚¹ï¼ŒåŒ…å«ç»çº¬åº¦ä¿¡æ¯</li>
            <li>è¾¹(Edges)ï¼šè¡¨ç¤ºè¿æ¥ä¸¤ä¸ªèŠ‚ç‚¹çš„é“è·¯ï¼ŒåŒ…å«è·ç¦»ã€é“è·¯ç±»å‹ç­‰ä¿¡æ¯</li>
            <li>æƒé‡ï¼šæ ¹æ®å¯¼èˆªæ–¹æ³•ä¸åŒï¼Œå¯ä»¥æ˜¯ç‰©ç†è·ç¦»æˆ–è¡Œè¿›æ—¶é—´</li>
        </ul>        <div class="mermaid">
        classDiagram
            class Graph {
                ğŸ—ºï¸ nodes
                ğŸ›£ï¸ edges
                ğŸ“¥ graph_from_xml()
            }
            
            class Node {
                ğŸ†” id
                ğŸŒ longitude
                ğŸŒ latitude
            }
            
            class Edge {
                ğŸ¯ source_node
                ğŸ¯ target_node
                ğŸ“ distance
                ğŸ›£ï¸ road_type
                ğŸš¦ congestion
                âš¡ base_speed
                ğŸƒ actual_speed
            }
            
            Graph "1" --> "*" Node: åŒ…å«
            Graph "1" --> "*" Edge: åŒ…å«
            Edge --> "2" Node: è¿æ¥
            
            class Graph{
                +load_map()
                +get_nodes()
                +get_edges()
            }
            class Node{
                +get_coordinates()
                +set_position()
            }
            class Edge{
                +calculate_weight()
                +update_congestion()
            }
        </classDiagram>
        </div>

        <h3>4.3 æ‹¥æŒ¤åº¦ç”Ÿæˆ</h3>
        <p>ç³»ç»Ÿä¸ºåœ°å›¾ä¸­çš„æ¯æ¡è¾¹éšæœºç”Ÿæˆæ‹¥æŒ¤åº¦ï¼Œå½±å“è¡Œè¿›é€Ÿåº¦å’Œæ—¶é—´è®¡ç®—ï¼š</p>
        <ul>
            <li>æ‹¥æŒ¤åº¦èŒƒå›´ï¼š0.2-1.0ï¼Œé¿å…å®Œå…¨å µå¡(0.2è¡¨ç¤ºä¸¥é‡æ‹¥å µï¼Œ1.0è¡¨ç¤ºç•…é€šæ— é˜»)</li>
            <li>å®é™…é€Ÿåº¦ = æ‹¥æŒ¤åº¦ Ã— åŸºç¡€é€Ÿåº¦</li>
            <li>åŸºç¡€é€Ÿåº¦æ ¹æ®é“è·¯ç±»å‹ç¡®å®šï¼Œä¾‹å¦‚ï¼š
                <ul>
                    <li>é«˜é€Ÿå…¬è·¯(motorway)ï¼š80 km/h</li>
                    <li>ä¸»è¦é“è·¯(primary)ï¼š70 km/h</li>
                    <li>ä½å®…åŒºé“è·¯(residential)ï¼š30 km/h</li>
                    <li>äººè¡Œé“(footway)ï¼š5 km/h</li>
                </ul>
            </li>
        </ul>

        <h2>5. Dijkstraç®—æ³•å®ç°ä¸ä¼˜åŒ–</h2>

        <h3>5.1 ç®—æ³•æ¦‚è¿°</h3>
        <p>ç³»ç»Ÿä½¿ç”¨æ”¹è¿›çš„Dijkstraç®—æ³•è¿›è¡Œæœ€çŸ­è·¯å¾„è®¡ç®—ï¼Œé€‚ç”¨äºå•æºæœ€çŸ­è·¯å¾„é—®é¢˜ã€‚</p>        <div class="mermaid">
        flowchart TD
            A[ğŸš€ åˆå§‹åŒ–] --> B[ğŸ“Š åˆ›å»ºä¼˜å…ˆé˜Ÿåˆ—]
            B --> C[ğŸ“ èµ·ç‚¹å…¥é˜Ÿ è·ç¦»=0]
            C --> D[ğŸ”„ ä¸»å¾ªç¯]
            D --> E{ğŸ“­ é˜Ÿåˆ—ä¸ºç©º?}
            E -->|âœ…| F[ğŸ è¿”å›ç»“æœ]
            E -->|âŒ| G[ğŸ“¤ å–æœ€å°è·ç¦»èŠ‚ç‚¹]
            G --> H{ğŸ¯ æ˜¯ç»ˆç‚¹?}
            H -->|âœ…| F
            H -->|âŒ| I[ğŸ” æ¾å¼›é‚»å±…èŠ‚ç‚¹]
            I --> J[âœ”ï¸ æ ‡è®°å·²è®¿é—®]
            J --> D
            
            style A fill:#e8f5e8
            style E fill:#fff3e0
            style H fill:#fff3e0
            style F fill:#ffebee
        </flowchart>
        </div>

        <h3>5.2 æ—¶é—´å¤æ‚åº¦åˆ†æ</h3>
        <p>Dijkstraç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸»è¦å—å›¾çš„è§„æ¨¡å’Œæ•°æ®ç»“æ„é€‰æ‹©çš„å½±å“ã€‚</p>

        <table class="complexity-table">
            <tr>
                <th>å®ç°æ–¹å¼</th>
                <th>æ—¶é—´å¤æ‚åº¦</th>
                <th>è¯´æ˜</th>
            </tr>
            <tr>
                <td>åŸºæœ¬å®ç°(æ•°ç»„)</td>
                <td>O(VÂ²)</td>
                <td>Vä¸ºé¡¶ç‚¹æ•°ï¼Œé€‚ç”¨äºç¨ å¯†å›¾</td>
            </tr>
            <tr>
                <td>ä¼˜å…ˆé˜Ÿåˆ—(æœ€å°å †)</td>
                <td>O((V+E)log V)</td>
                <td>ç³»ç»Ÿé‡‡ç”¨è¿™ç§å®ç°ï¼ŒEä¸ºè¾¹æ•°ï¼Œä½¿ç”¨MinHeapä¼˜åŒ–</td>
            </tr>
            <tr>
                <td>Fibonacciå †</td>
                <td>O(E + V log V)</td>
                <td>ç†è®ºä¸Šæœ€ä¼˜ä½†å®ç°å¤æ‚</td>
            </tr>
        </table>

        <p>å¯¹äºåœ°å›¾å¯¼èˆªåœºæ™¯ï¼Œç³»ç»Ÿä½¿ç”¨æœ€å°å †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—ï¼Œä¸»è¦æ“ä½œå’Œå¤æ‚åº¦å¦‚ä¸‹ï¼š</p>
        <ul>
            <li>ä¼˜å…ˆé˜Ÿåˆ—æ“ä½œï¼šO(log V)</li>
            <li>é‚»å±…èŠ‚ç‚¹æ¾å¼›ï¼šO(E)</li>
            <li>æ€»ä½“å¤æ‚åº¦ï¼šO((V+E)log V)ï¼Œå…¶ä¸­Eé€šå¸¸è¿œå¤§äºV</li>
            <li>åœ¨å®é™…åœ°å›¾ä¸­ï¼Œå›¾é€šå¸¸æ˜¯ç¨€ç–çš„ï¼Œå› æ­¤è¿™ç§å®ç°æ•ˆç‡è¾ƒé«˜</li>
        </ul>

        <h3>5.3 ä¼˜åŒ–ç­–ç•¥</h3>
        <p>ç³»ç»Ÿå¯¹Dijkstraç®—æ³•è¿›è¡Œäº†å¤šé¡¹ä¼˜åŒ–ï¼š</p>
        <ol>
            <li>ä½¿ç”¨æœ€å°å †(MinHeap)ä¼˜åŒ–ä¼˜å…ˆé˜Ÿåˆ—æ“ä½œ</li>
            <li>é€šè¿‡MySetå¿«é€Ÿæ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å·²è®¿é—®</li>
            <li>æå‰ç»ˆæ­¢ï¼šæ‰¾åˆ°ç»ˆç‚¹åç«‹å³ç»“æŸæœç´¢</li>
            <li>å¤šç›®æ ‡ä¼˜åŒ–ï¼šè®¡ç®—ä¸€ä¸ªèµ·ç‚¹åˆ°å¤šä¸ªç›®æ ‡ç‚¹çš„æœ€çŸ­è·¯å¾„</li>
            <li>è¾¹æƒé‡ç¼“å­˜ï¼šé¿å…é‡å¤è®¡ç®—è¾¹æƒé‡</li>
            <li>åˆ†æ®µå¤„ç†ï¼šå°†è·¯å¾„æŒ‰é€Ÿåº¦ç±»å‹åˆ†æ®µï¼Œä¼˜åŒ–å±•ç¤ºæ•ˆæœ</li>
        </ol>

        <h3>5.4 å¤šç‚¹è·¯å¾„è§„åˆ’</h3>
        <p>å½“éœ€è¦è®¡ç®—ç»è¿‡å¤šä¸ªé€”å¾„ç‚¹çš„è·¯å¾„æ—¶ï¼Œç³»ç»Ÿä½¿ç”¨æ”¹è¿›çš„æœ€è¿‘é‚»+2-optç®—æ³•è§£å†³TSPé—®é¢˜ï¼š</p>        <div class="mermaid">
        flowchart LR
            A[ğŸ“ å¤šåæ ‡ç‚¹] --> B[ğŸ”„ è½¬æ¢å›¾èŠ‚ç‚¹]
            B --> C[ğŸ“Š è®¡ç®—ç‚¹å¯¹æœ€çŸ­è·¯å¾„]
            C --> D[ğŸ¯ æœ€è¿‘é‚»ç®—æ³•]
            D --> E[âš™ï¸ 2-optå±€éƒ¨ä¼˜åŒ–]
            E --> F[ğŸ”§ æ„å»ºå®Œæ•´è·¯å¾„]
            F --> G[âœ¨ è¿”å›ä¼˜åŒ–è·¯å¾„]
            
            style A fill:#e3f2fd
            style D fill:#fff3e0
            style E fill:#f3e5f5
            style G fill:#e8f5e8
        </flowchart>
        </div>        <ol>
            <li>é¢„è®¡ç®—æ‰€æœ‰èŠ‚ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„å’Œè·ç¦»</li>
            <li>ä½¿ç”¨æœ€è¿‘é‚»ç®—æ³•æ„å»ºåˆå§‹TSPè§£</li>
            <li>åº”ç”¨2-optç®—æ³•è¿›è¡Œå±€éƒ¨ä¼˜åŒ–</li>
            <li>åˆå¹¶åˆ†æ®µè·¯å¾„ï¼Œç”Ÿæˆå®Œæ•´å¯¼èˆªè·¯çº¿</li>
        </ol>

        <h4>5.4.1 æœ€è¿‘é‚»ç®—æ³•(Nearest Neighbor Algorithm)</h4>
        <p><strong>ç®—æ³•åŸç†ï¼š</strong>æœ€è¿‘é‚»ç®—æ³•æ˜¯ä¸€ç§è´ªå¿ƒç®—æ³•ï¼Œç”¨äºæ„å»ºTSPé—®é¢˜çš„åˆå§‹è§£ã€‚</p>
        
        <div class="mermaid">
        flowchart TD
            A[ğŸš€ é€‰æ‹©èµ·å§‹èŠ‚ç‚¹] --> B[ğŸ“ å½“å‰èŠ‚ç‚¹ = èµ·å§‹èŠ‚ç‚¹]
            B --> C[ğŸ“‹ åˆå§‹åŒ–æœªè®¿é—®é›†åˆ]
            C --> D[ğŸ”„ å¼€å§‹ä¸»å¾ªç¯]
            D --> E{ğŸ“­ æœªè®¿é—®é›†åˆç©º?}
            E -->|âœ… æ˜¯| F[ğŸ è¿”å›è·¯å¾„]
            E -->|âŒ å¦| G[ğŸ” æ‰¾æœ€è¿‘æœªè®¿é—®èŠ‚ç‚¹]
            G --> H[â• æ·»åŠ åˆ°è·¯å¾„]
            H --> I[âŒ ä»æœªè®¿é—®é›†åˆç§»é™¤]
            I --> J[ğŸ”„ æ›´æ–°å½“å‰èŠ‚ç‚¹]
            J --> D
            
            style A fill:#e8f5e8
            style E fill:#fff3e0
            style G fill:#f3e5f5
            style F fill:#ffebee
        </flowchart>
        </div>

        <p><strong>ç®—æ³•æ­¥éª¤ï¼š</strong></p>
        <ol>
            <li>ä»èµ·å§‹èŠ‚ç‚¹å¼€å§‹</li>
            <li>åœ¨æœªè®¿é—®çš„èŠ‚ç‚¹ä¸­é€‰æ‹©è·ç¦»å½“å‰èŠ‚ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹</li>
            <li>å°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ°è·¯å¾„ä¸­ï¼Œå¹¶æ ‡è®°ä¸ºå·²è®¿é—®</li>
            <li>é‡å¤æ­¥éª¤2-3ï¼Œç›´åˆ°æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«è®¿é—®</li>
        </ol>

        <p><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong>O(nÂ²)ï¼Œå…¶ä¸­nä¸ºèŠ‚ç‚¹æ•°é‡</p>
        <p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>O(n)ï¼Œç”¨äºå­˜å‚¨æœªè®¿é—®èŠ‚ç‚¹é›†åˆ</p>
        <p><strong>ä¼˜ç¼ºç‚¹ï¼š</strong></p>
        <ul>
            <li>âœ… ç®—æ³•ç®€å•ï¼Œæ˜“äºç†è§£å’Œå®ç°</li>
            <li>âœ… æ—¶é—´å¤æ‚åº¦è¾ƒä½ï¼Œé€‚åˆå®æ—¶åº”ç”¨</li>
            <li>âŒ è´ªå¿ƒç­–ç•¥å¯èƒ½å¯¼è‡´å±€éƒ¨æœ€ä¼˜è§£</li>
            <li>âŒ è§£çš„è´¨é‡ä¾èµ–äºèµ·å§‹èŠ‚ç‚¹çš„é€‰æ‹©</li>
        </ul>

        <h4>5.4.2 2-optç®—æ³•(2-opt Algorithm)</h4>
        <p><strong>ç®—æ³•åŸç†ï¼š</strong>2-optæ˜¯ä¸€ç§å±€éƒ¨æœç´¢ç®—æ³•ï¼Œé€šè¿‡äº¤æ¢è·¯å¾„ä¸­çš„è¾¹æ¥ä¼˜åŒ–TSPè§£ã€‚</p>

        <div class="mermaid">
        flowchart TD
            A[ğŸ¯ è¾“å…¥åˆå§‹è·¯å¾„] --> B[ğŸ”„ è®¾ç½®æ”¹è¿›æ ‡å¿—=true]
            B --> C[ğŸ” while æœ‰æ”¹è¿›]
            C --> D[ğŸ”„ éå†æ‰€æœ‰è¾¹å¯¹i,j]
            D --> E[ğŸ“ è®¡ç®—å½“å‰è¾¹æˆæœ¬]
            E --> F[ğŸ”„ è®¡ç®—äº¤æ¢åæˆæœ¬]
            F --> G{ğŸ’° æˆæœ¬é™ä½?}
            G -->|âœ… æ˜¯| H[ğŸ”„ æ‰§è¡Œ2-optäº¤æ¢]
            G -->|âŒ å¦| I[â¡ï¸ ç»§ç»­ä¸‹ä¸€å¯¹]
            H --> J[âœ… è®¾ç½®æ”¹è¿›æ ‡å¿—=true]
            J --> I
            I --> K{ğŸ”š éå†å®Œæˆ?}
            K -->|âŒ å¦| D
            K -->|âœ… æ˜¯| L{ğŸ”„ æœ‰æ”¹è¿›?}
            L -->|âœ… æ˜¯| C
            L -->|âŒ å¦| M[ğŸ è¿”å›ä¼˜åŒ–è·¯å¾„]
            
            style A fill:#e8f5e8
            style G fill:#fff3e0
            style H fill:#f3e5f5
            style M fill:#ffebee
        </flowchart>
        </div>

        <p><strong>2-optäº¤æ¢åŸç†ï¼š</strong></p>
        <div class="mermaid">
        flowchart LR
            subgraph "äº¤æ¢å‰"
                A1[èŠ‚ç‚¹A] -->|è¾¹1| B1[èŠ‚ç‚¹B]
                B1 --> C1[...]
                C1 --> D1[èŠ‚ç‚¹C]
                D1 -->|è¾¹2| E1[èŠ‚ç‚¹D]
            end
            
            subgraph "äº¤æ¢å"
                A2[èŠ‚ç‚¹A] -->|æ–°è¾¹1| D2[èŠ‚ç‚¹D]
                D2 --> C2[...]
                C2 --> B2[èŠ‚ç‚¹B]
                B2 -->|æ–°è¾¹2| E2[èŠ‚ç‚¹...]
            end
            
            style A1 fill:#e3f2fd
            style D1 fill:#e3f2fd
            style A2 fill:#fff3e0
            style D2 fill:#fff3e0
        </flowchart>
        </div>

        <p><strong>ç®—æ³•ç‰¹ç‚¹ï¼š</strong></p>
        <ul>
            <li><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong>O(nÂ²)æ¯æ¬¡è¿­ä»£ï¼Œæ€»ä½“å¤æ‚åº¦å–å†³äºè¿­ä»£æ¬¡æ•°</li>
            <li><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>O(1)ï¼ŒåŸåœ°äº¤æ¢</li>
            <li><strong>æ”¶æ•›æ€§ï¼š</strong>èƒ½å¤Ÿä¿è¯æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£</li>
            <li><strong>å®ç”¨æ€§ï¼š</strong>åœ¨å®é™…åº”ç”¨ä¸­èƒ½æ˜¾è‘—æ”¹å–„è§£çš„è´¨é‡</li>
        </ul>

        <h4>5.4.3 ç³»ç»Ÿä¸­çš„å®ç°ç»†èŠ‚</h4>
        <pre><code>def _nearest_neighbor_tsp(self, start_node, waypoints, distances):
    """æœ€è¿‘é‚»ç®—æ³•å®ç°"""
    unvisited = set(waypoints)  # æœªè®¿é—®èŠ‚ç‚¹é›†åˆ
    tour = [start_node]         # è·¯å¾„ä»èµ·ç‚¹å¼€å§‹
    current = start_node        # å½“å‰èŠ‚ç‚¹
    
    while unvisited:
        # æ‰¾åˆ°è·ç¦»å½“å‰èŠ‚ç‚¹æœ€è¿‘çš„æœªè®¿é—®èŠ‚ç‚¹
        nearest = min(unvisited, 
                     key=lambda node: distances.get((current, node), float('inf')))
        tour.append(nearest)    # æ·»åŠ åˆ°è·¯å¾„
        unvisited.remove(nearest)  # æ ‡è®°ä¸ºå·²è®¿é—®
        current = nearest       # æ›´æ–°å½“å‰èŠ‚ç‚¹
    
    return tour

def _two_opt_optimize(self, tour, distances):
    """2-optç®—æ³•ä¼˜åŒ–"""
    improved = True
    while improved:
        improved = False
        for i in range(1, len(tour) - 2):
            for j in range(i + 1, len(tour)):
                # è®¡ç®—å½“å‰è¾¹çš„æˆæœ¬
                current_cost = (distances.get((tour[i-1], tour[i]), float('inf')) +
                               distances.get((tour[j], tour[j+1]), float('inf')))
                
                # è®¡ç®—äº¤æ¢åçš„æˆæœ¬
                new_cost = (distances.get((tour[i-1], tour[j]), float('inf')) +
                           distances.get((tour[i], tour[j+1]), float('inf')))
                
                if new_cost < current_cost:
                    # æ‰§è¡Œ2-optäº¤æ¢ï¼šåè½¬å­åºåˆ—
                    tour[i:j+1] = reversed(tour[i:j+1])
                    improved = True
    
    return tour</code></pre>

        <h4>5.4.4 ç®—æ³•æ€§èƒ½åˆ†æ</h4>
        <table class="complexity-table">
            <tr>
                <th>ç®—æ³•é˜¶æ®µ</th>
                <th>æ—¶é—´å¤æ‚åº¦</th>
                <th>è¯´æ˜</th>
                <th>å®é™…è¡¨ç°</th>
            </tr>
            <tr>
                <td>é¢„è®¡ç®—è·ç¦»çŸ©é˜µ</td>
                <td>O(nÂ² Ã— (V+E)log V)</td>
                <td>è®¡ç®—æ‰€æœ‰ç‚¹å¯¹é—´æœ€çŸ­è·¯å¾„</td>
                <td>ä¸€æ¬¡æ€§è®¡ç®—ï¼Œå¯ç¼“å­˜ç»“æœ</td>
            </tr>
            <tr>
                <td>æœ€è¿‘é‚»ç®—æ³•</td>
                <td>O(nÂ²)</td>
                <td>æ„å»ºåˆå§‹TSPè§£</td>
                <td>å¿«é€Ÿç”Ÿæˆå¯è¡Œè§£</td>
            </tr>
            <tr>
                <td>2-optä¼˜åŒ–</td>
                <td>O(nÂ²k)</td>
                <td>kä¸ºè¿­ä»£æ¬¡æ•°</td>
                <td>é€šå¸¸3-5æ¬¡è¿­ä»£æ”¶æ•›</td>
            </tr>
            <tr>
                <td>è·¯å¾„åˆå¹¶</td>
                <td>O(n)</td>
                <td>æ„å»ºæœ€ç»ˆè·¯å¾„</td>
                <td>çº¿æ€§æ—¶é—´å®Œæˆ</td>
            </tr>
        </table>

        <div class="note">
            <strong>ç®—æ³•é€‰æ‹©åŸå› ï¼š</strong>
            <ul>
                <li><strong>å®æ—¶æ€§è¦æ±‚ï¼š</strong>å¯¼èˆªç³»ç»Ÿéœ€è¦å¿«é€Ÿå“åº”ï¼ŒO(nÂ²)å¤æ‚åº¦é€‚åˆå°è§„æ¨¡å¤šç‚¹è·¯å¾„è§„åˆ’</li>
                <li><strong>è§£è´¨é‡å¹³è¡¡ï¼š</strong>æœ€è¿‘é‚»+2-optç»„åˆåœ¨è®¡ç®—é€Ÿåº¦å’Œè§£è´¨é‡é—´è¾¾åˆ°è‰¯å¥½å¹³è¡¡</li>
                <li><strong>å®ç°ç®€å•ï¼š</strong>ç®—æ³•é€»è¾‘æ¸…æ™°ï¼Œä¾¿äºè°ƒè¯•å’Œç»´æŠ¤</li>
                <li><strong>é€‚åº”æ€§å¼ºï¼š</strong>é€‚ç”¨äºä¸åŒè§„æ¨¡çš„é€”å¾„ç‚¹é›†åˆ</li>
            </ul>
        </div>

        <div class="note">
            <strong>å¤šç‚¹è·¯å¾„ä¼˜åŒ–ï¼š</strong>ç³»ç»Ÿå¯¹äºç»è¿‡å¤šä¸ªé€”å¾„ç‚¹çš„è·¯å¾„è§„åˆ’é‡‡ç”¨äº†å¯å‘å¼ç®—æ³•ï¼Œè™½ç„¶ä¸ä¿è¯å…¨å±€æœ€ä¼˜è§£ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­èƒ½å¤Ÿåœ¨åˆç†æ—¶é—´å†…ç”Ÿæˆæ¥è¿‘æœ€ä¼˜çš„è§£ï¼Œæ»¡è¶³å®æ—¶å¯¼èˆªéœ€æ±‚ã€‚
        </div>        <h2>6. POIæœç´¢ä¸å¯¼èˆªé›†æˆ</h2>
        <p>ç³»ç»Ÿé›†æˆäº†POI(å…´è¶£ç‚¹)æœç´¢åŠŸèƒ½ï¼Œæ”¯æŒç”¨æˆ·æŸ¥è¯¢å‘¨è¾¹è®¾æ–½å¹¶è§„åˆ’è·¯çº¿ï¼š</p>
        
        <div class="mermaid">
        flowchart LR
            A[ğŸ” POIæœç´¢è¯·æ±‚] --> B[ğŸ“ è·å–ç”¨æˆ·ä½ç½®]
            B --> C[ğŸŒ è°ƒç”¨ç™¾åº¦åœ°å›¾API]
            C --> D[ğŸ”„ åæ ‡ç³»è½¬æ¢]
            D --> E[ğŸ“‹ è·å–POIåˆ—è¡¨]
            E --> F[ğŸ¯ Dijkstraè·ç¦»è®¡ç®—]
            F --> G[ğŸ“Š æŒ‰è·ç¦»æ’åº]
            G --> H[ğŸ“± è¿”å›POIåˆ—è¡¨]
            
            style A fill:#e3f2fd
            style C fill:#fff3e0
            style F fill:#f3e5f5
            style H fill:#e8f5e8
        </flowchart>
        </div>
        
        <ul>
            <li>æ”¯æŒå¤šç±»å‹POIæœç´¢(é¤å…ã€æ™¯ç‚¹ã€é…’åº—ç­‰)</li>
            <li>æ•´åˆç™¾åº¦åœ°å›¾APIè·å–POIæ•°æ®</li>
            <li>ä½¿ç”¨Dijkstraç®—æ³•è®¡ç®—å½“å‰ä½ç½®åˆ°POIçš„å®é™…è·¯å¾„è·ç¦»</li>
            <li>æä¾›æŒ‰è·ç¦»æ’åºçš„POIåˆ—è¡¨</li>
        </ul>

        <h2>7. æ€»ç»“</h2>
        <p>åœ°å›¾å¯¼èˆªåŠŸèƒ½é€šè¿‡æ•´åˆOpenStreetMapæ•°æ®ã€Dijkstraæœ€çŸ­è·¯å¾„ç®—æ³•å’ŒPOIæœç´¢ï¼Œæä¾›äº†å…¨é¢çš„è·¯å¾„è§„åˆ’è§£å†³æ–¹æ¡ˆã€‚ç³»ç»Ÿæ”¯æŒæœ€çŸ­è·ç¦»ã€æœ€çŸ­æ—¶é—´å’Œå¤šç‚¹é€”å¾„ç­‰å¤šç§å¯¼èˆªç­–ç•¥ï¼Œå¹¶è€ƒè™‘äº†äº¤é€šå·¥å…·ç±»å‹ã€é“è·¯æ‹¥æŒ¤åº¦ç­‰å®é™…å› ç´ ï¼Œä¸ºç”¨æˆ·æä¾›ç²¾ç¡®çš„å¯¼èˆªæœåŠ¡ã€‚</p>

        <p>é€šè¿‡å¯¹Dijkstraç®—æ³•çš„å¤šé¡¹ä¼˜åŒ–å’Œæ•°æ®ç»“æ„é€‰æ‹©ï¼Œç³»ç»Ÿåœ¨ä¿è¯è·¯å¾„è´¨é‡çš„åŒæ—¶ï¼Œå®ç°äº†é«˜æ•ˆçš„è·¯å¾„è®¡ç®—ï¼Œæ»¡è¶³å®æ—¶å¯¼èˆªçš„éœ€æ±‚ã€‚</p>

        <table>
            <tr>
                <th>åŠŸèƒ½</th>
                <th>å®ç°æ–¹æ³•</th>
                <th>æ—¶é—´å¤æ‚åº¦</th>
            </tr>
            <tr>
                <td>æœ€çŸ­è·ç¦»å¯¼èˆª</td>
                <td>Dijkstra + ç‰©ç†è·ç¦»æƒé‡</td>
                <td>O((V+E)log V)</td>
            </tr>
            <tr>
                <td>æœ€çŸ­æ—¶é—´å¯¼èˆª</td>
                <td>Dijkstra + æ—¶é—´æƒé‡ + æ‹¥æŒ¤åº¦</td>
                <td>O((V+E)log V)</td>
            </tr>
            <tr>
                <td>å¤šç‚¹è·¯å¾„è§„åˆ’</td>
                <td>æœ€è¿‘é‚» + 2-optä¼˜åŒ–</td>
                <td>O(nÂ²)</td>
            </tr>
            <tr>
                <td>POIæœç´¢</td>
                <td>APIé›†æˆ + è·ç¦»è®¡ç®—</td>
                <td>O((V+E)log V)</td>
            </tr>
        </table>
    </div>    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            securityLevel: 'loose',
            themeVariables: {
                primaryColor: '#e3f2fd',
                primaryTextColor: '#1976d2',
                primaryBorderColor: '#1976d2',
                lineColor: '#1976d2',
                secondaryColor: '#fff8e1',
                tertiaryColor: '#f3e5f5',
                background: '#ffffff',
                mainBkg: '#ffffff',
                secondBkg: '#f5f5f5',
                tertiaryBkg: '#e8f5e8'
            },
            fontFamily: 'Microsoft YaHei, Arial, sans-serif',
            fontSize: 13,
            flowchart: {
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 30,
                rankSpacing: 40,
                padding: 10
            },
            classDiagram: {
                htmlLabels: true
            }
        });
    </script>
</body>
</html>
