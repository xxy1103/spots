<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªæ€§åŒ–æ—…æ¸¸ç³»ç»Ÿ - æ¶æ„åˆ†ææŠ¥å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        h2 {
            color: #34495e;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            font-size: 1.8em;
        }
        
        h3 {
            color: #2980b9;
            margin: 25px 0 10px 0;
            font-size: 1.4em;
        }
        
        .section {
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }
        
        .architecture-overview {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid #3498db;
        }
        
        .mvc-layer {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid #e74c3c;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .data-structure-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .data-structure-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #27ae60;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .data-structure-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .api-endpoint {
            background: #fff3cd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .highlight {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .mermaid {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .tech-item {
            background: #3498db;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .table-responsive {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #3498db;
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .summary-box {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #9b59b6;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #9b59b6;
        }
        
        .metric-label {
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ ä¸ªæ€§åŒ–æ—…æ¸¸ç³»ç»Ÿæ¶æ„åˆ†ææŠ¥å‘Š</h1>
        
        <div class="summary-box">
            <h2 style="color: white; border: none; margin-bottom: 20px;">ğŸ“Š é¡¹ç›®æ¦‚è§ˆ</h2>
            <p>åŸºäºFlaskæ¡†æ¶çš„ä¸ªæ€§åŒ–æ—…æ¸¸æ¨èç³»ç»Ÿï¼Œé‡‡ç”¨MVCæ¶æ„æ¨¡å¼ï¼Œé›†æˆå¤šç§é«˜æ•ˆæ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œæä¾›æ™ºèƒ½åŒ–çš„æ—…æ¸¸æ™¯ç‚¹æ¨èã€è·¯å¾„è§„åˆ’å’Œæ—¥è®°ç®¡ç†åŠŸèƒ½ã€‚</p>
        </div>

        <div class="section">
            <h2>ğŸ—ï¸ æŠ€æœ¯æ ˆ</h2>
            <div class="tech-stack">
                <span class="tech-item">Python</span>
                <span class="tech-item">Flask</span>
                <span class="tech-item">Jinja2</span>
                <span class="tech-item">OSMnx</span>
                <span class="tech-item">Matplotlib</span>
                <span class="tech-item">NumPy</span>
                <span class="tech-item">Pillow</span>
                <span class="tech-item">è‡ªå®šä¹‰æ•°æ®ç»“æ„</span>
            </div>
        </div>

        <div class="architecture-overview">
            <h2 style="color: #2c3e50; border: none;">ğŸ¯ MVCæ¶æ„æ€»è§ˆ</h2>            <div class="mermaid">
                flowchart TD
                    %% è§†å›¾å±‚
                    subgraph VIEW["ğŸ¨ View Layer (è§†å›¾å±‚)"]
                        direction LR
                        V1["ğŸ“„ HTMLæ¨¡æ¿<br/>login.html | map.html<br/>diary_*.html | spot_*.html"]
                        V2["ğŸ­ é™æ€èµ„æº<br/>CSS | JavaScript | Images"]
                    end
                    
                    %% æ§åˆ¶å±‚
                    subgraph CTRL["ğŸ® Controller Layer (æ§åˆ¶å±‚)"]
                        direction LR
                        C1["ğŸš€ Flaskåº”ç”¨å…¥å£<br/>app.py"]
                        C2["ğŸ”— APIè·¯ç”±<br/>api/routes.py"]
                        C3["ğŸ“± é¡µé¢è·¯ç”±<br/>è“å›¾æ¨¡å—é›†åˆ"]
                    end
                    
                    %% æ¨¡å‹å±‚
                    subgraph MODEL["ğŸ—„ï¸ Model Layer (æ¨¡å‹å±‚)"]
                        direction LR
                        M1["ğŸ‘¤ ç”¨æˆ·ç®¡ç†<br/>user_class.py"]
                        M2["ğŸï¸ æ™¯ç‚¹ç®¡ç†<br/>Spot_class.py"]
                        M3["ğŸ“– æ—¥è®°ç®¡ç†<br/>diary_class.py"]
                    end
                    
                    %% æ•°æ®æ¨¡å‹
                    subgraph DATAMODEL["ï¿½ æ•°æ®æ¨¡å‹å±‚"]
                        M4["ï¿½ æ•°æ®æ¨¡å‹<br/>Model/Model.py"]
                    end
                    
                    %% æ•°æ®å±‚å’Œç®—æ³•å±‚å¹¶æ’
                    subgraph DATA_ALGO["åº•å±‚æ”¯æŒ"]
                        direction LR
                        
                        subgraph DATA["ğŸ’¾ Data Layer (æ•°æ®å±‚)"]
                            direction TB
                            D2["âš™ï¸ æ–‡ä»¶IO<br/>fileIo.py"]
                            D1["ğŸ“ æ–‡ä»¶å­˜å‚¨<br/>åˆ†ç±»æ•°æ®å­˜å‚¨"]
                            D2 --> D1
                        end
                        
                        subgraph ALGO["ğŸ”§ Algorithm Layer (ç®—æ³•å±‚)"]
                            direction LR
                            A1["ğŸŒ² æ•°æ®ç»“æ„<br/>Bæ ‘ | çº¢é»‘æ ‘ | å“ˆå¸Œè¡¨"]
                            A2["âš¡ ç®—æ³•å®ç°<br/>Dijkstra | KMP | å¿«æ’"]
                        end
                    end
                    
                    %% è§†å›¾åˆ°æ§åˆ¶å±‚
                    V1 -..-> C3
                    V2 -..-> C1
                    
                    %% æ§åˆ¶å±‚å†…éƒ¨
                    C1 ==> C2
                    C1 ==> C3
                    
                    %% æ§åˆ¶å±‚åˆ°æ¨¡å‹å±‚
                    C2 ===> M1 & M2 & M3
                    C3 ===> M1 & M2 & M3
                    
                    %% æ¨¡å‹å±‚åˆ°æ•°æ®æ¨¡å‹
                    M1 & M2 & M3 ---> M4
                    
                    %% æ¨¡å‹å±‚åˆ°æ•°æ®å’Œç®—æ³•å±‚
                    M1 & M2 & M3 -.-> D2
                    M1 & M2 & M3 -.-> A1
                    M1 & M2 & M3 -.-> A2
                    
                    %% æ ·å¼å®šä¹‰
                    classDef viewStyle fill:#e8f4fd,stroke:#1e88e5,stroke-width:2px,color:#000,rounded:true
                    classDef ctrlStyle fill:#fff3e0,stroke:#fb8c00,stroke-width:2px,color:#000,rounded:true
                    classDef modelStyle fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                    classDef dataModelStyle fill:#f0f8ff,stroke:#4682b4,stroke-width:2px,color:#000,rounded:true
                    classDef dataStyle fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000,rounded:true
                    classDef algoStyle fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                    
                    class V1,V2 viewStyle
                    class C1,C2,C3 ctrlStyle
                    class M1,M2,M3 modelStyle
                    class M4 dataModelStyle
                    class D1,D2 dataStyle
                    class A1,A2 algoStyle
                    
                    %% è®¾ç½®ä¸»è¦æµç¨‹é«˜äº®
                    linkStyle 8,9,10,11,12,13 stroke:#43a047,stroke-width:2px
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“± MVCå„å±‚è¯¦ç»†åˆ†æ</h2>
            
            <div class="mvc-layer">
                <h3>ğŸ¨ Viewå±‚ (è§†å›¾å±‚)</h3>
                <p><strong>èŒè´£ï¼š</strong>è´Ÿè´£ç”¨æˆ·ç•Œé¢å±•ç¤ºå’Œç”¨æˆ·äº¤äº’</p>
                <p><strong>ä¸»è¦ç»„ä»¶ï¼š</strong></p>
                <ul>
                    <li><span class="highlight">HTMLæ¨¡æ¿</span>ï¼šä½¿ç”¨Jinja2æ¨¡æ¿å¼•æ“æ¸²æŸ“åŠ¨æ€å†…å®¹</li>
                    <li><span class="highlight">é™æ€èµ„æº</span>ï¼šCSSæ ·å¼ã€JavaScriptè„šæœ¬ã€å›¾ç‰‡èµ„æº</li>
                    <li><span class="highlight">å“åº”å¼è®¾è®¡</span>ï¼šé€‚é…ä¸åŒè®¾å¤‡çš„ç•Œé¢å±•ç¤º</li>
                </ul>
                
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>æ¨¡æ¿æ–‡ä»¶</th>
                                <th>åŠŸèƒ½æè¿°</th>
                                <th>å…³è”æ§åˆ¶å™¨</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>login.html</td>
                                <td>ç”¨æˆ·ç™»å½•æ³¨å†Œç•Œé¢</td>
                                <td>login/routes.py</td>
                            </tr>
                            <tr>
                                <td>map.html</td>
                                <td>åœ°å›¾å±•ç¤ºå’Œè·¯å¾„è§„åˆ’</td>
                                <td>map/routes.py</td>
                            </tr>
                            <tr>
                                <td>diary_*.html</td>
                                <td>æ—…æ¸¸æ—¥è®°ç›¸å…³é¡µé¢</td>
                                <td>diary/routes.py</td>
                            </tr>
                            <tr>
                                <td>spot_*.html</td>
                                <td>æ™¯ç‚¹ä¿¡æ¯å±•ç¤ºé¡µé¢</td>
                                <td>spots/routes.py</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="mvc-layer">
                <h3>ğŸ® Controllerå±‚ (æ§åˆ¶å±‚)</h3>
                <p><strong>èŒè´£ï¼š</strong>å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œåè°ƒModelå’ŒViewä¹‹é—´çš„äº¤äº’</p>
                <p><strong>è®¾è®¡æ¨¡å¼ï¼š</strong>é‡‡ç”¨è“å›¾(Blueprint)æ¨¡å¼å®ç°æ¨¡å—åŒ–è·¯ç”±ç®¡ç†</p>
                  <div class="mermaid">
                    flowchart LR
                        subgraph "Flaskåº”ç”¨" 
                            APP["ğŸš€ app.py<br/>ä¸»åº”ç”¨å…¥å£"]
                            style APP fill:#fff3e0,stroke:#fb8c00,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        subgraph "è“å›¾æ¨¡å—"
                            direction TB
                            API["ğŸ”— apiè“å›¾<br/>/api/routes.py"]
                            LOGIN["ğŸ” loginè“å›¾<br/>/login/routes.py"]
                            MAP["ğŸ—ºï¸ mapè“å›¾<br/>/map/routes.py"]
                            SPOTS["ğŸï¸ spotsè“å›¾<br/>/spots/routes.py"]
                            DIARY["ğŸ“– diaryè“å›¾<br/>/diary/routes.py"]
                            
                            style API fill:#ffccbc,stroke:#ff5722,stroke-width:2px,color:#000,rounded:true
                            style LOGIN fill:#bbdefb,stroke:#2196f3,stroke-width:2px,color:#000,rounded:true
                            style MAP fill:#c8e6c9,stroke:#4caf50,stroke-width:2px,color:#000,rounded:true
                            style SPOTS fill:#e1bee7,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                            style DIARY fill:#ffe0b2,stroke:#ff9800,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        APP ==> API
                        APP ==> LOGIN
                        APP ==> MAP
                        APP ==> SPOTS
                        APP ==> DIARY
                        
                        style APP stroke-width:2px
                </div>
                
                <div class="api-endpoint">
                    <h4>ğŸ”— ä¸»è¦APIç«¯ç‚¹</h4>
                    <ul>
                        <li><code>POST /api/login</code> - ç”¨æˆ·ç™»å½•éªŒè¯</li>
                        <li><code>POST /api/guest-login</code> - æ¸¸å®¢ç™»å½•</li>
                        <li><code>GET /api/check-session</code> - ä¼šè¯éªŒè¯</li>
                        <li><code>GET /api/recommend-spots</code> - æ™¯ç‚¹æ¨è</li>
                        <li><code>POST /api/search-spots</code> - æ™¯ç‚¹æœç´¢</li>
                        <li><code>GET /map/view</code> - åœ°å›¾è§†å›¾</li>
                        <li><code>POST /map/nearby-spots</code> - å‘¨è¾¹æ™¯ç‚¹æŸ¥è¯¢</li>
                    </ul>
                </div>
            </div>

            <div class="mvc-layer">
                <h3>ğŸ—„ï¸ Modelå±‚ (æ¨¡å‹å±‚)</h3>
                <p><strong>èŒè´£ï¼š</strong>æ•°æ®å¤„ç†ã€ä¸šåŠ¡é€»è¾‘å®ç°ã€æ•°æ®æŒä¹…åŒ–</p>
                <p><strong>æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong>å¤§é‡ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ç»“æ„ä¼˜åŒ–æ€§èƒ½</p>
                  <div class="mermaid">
                    flowchart TD
                        subgraph BUSINESS["ä¸šåŠ¡æ¨¡å‹"]
                            direction LR
                            UM["ğŸ‘¤ UserManager<br/>ç”¨æˆ·ç®¡ç†å™¨"]
                            SM["ğŸï¸ SpotManager<br/>æ™¯ç‚¹ç®¡ç†å™¨"]
                            DM["ğŸ“– DiaryManager<br/>æ—¥è®°ç®¡ç†å™¨"]
                            
                            style UM fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                            style SM fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                            style DM fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        subgraph DATA_MODEL["æ•°æ®æ¨¡å‹"]
                            direction LR
                            USER["ğŸ‘¥ Userç±»<br/>(ç”¨æˆ·å®ä½“)"]
                            SPOT["ğŸŒ„ Spotç±»<br/>(æ™¯ç‚¹å®ä½“)"]
                            DIARY["ğŸ“” Diaryç±»<br/>(æ—¥è®°å®ä½“)"]
                            
                            style USER fill:#f0f8ff,stroke:#4682b4,stroke-width:2px,color:#000,rounded:true
                            style SPOT fill:#f0f8ff,stroke:#4682b4,stroke-width:2px,color:#000,rounded:true
                            style DIARY fill:#f0f8ff,stroke:#4682b4,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        subgraph STORAGE["æ•°æ®å­˜å‚¨"]
                            FILES["ğŸ“ æ–‡ä»¶ç³»ç»Ÿ<br/>(JSONæ ¼å¼)"]
                            style FILES fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        %% ç®¡ç†å™¨åˆ°å®ä½“çš„å…³ç³»
                        UM ==> USER
                        SM ==> SPOT
                        DM ==> DIARY
                        
                        %% å®ä½“åˆ°å­˜å‚¨çš„å…³ç³»
                        USER & SPOT & DIARY -.-> FILES
                        
                        style BUSINESS fill:none,stroke:#43a047,stroke-width:3px
                        style DATA_MODEL fill:none,stroke:#4682b4,stroke-width:3px  
                        style STORAGE fill:none,stroke:#e91e63,stroke-width:3px
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”§ æ ¸å¿ƒæ•°æ®ç»“æ„ä¸ç®—æ³•</h2>
            <p>æœ¬ç³»ç»Ÿçš„ä¸€å¤§äº®ç‚¹æ˜¯é›†æˆäº†å¤šç§é«˜æ•ˆçš„æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œæå¤§æå‡äº†ç³»ç»Ÿæ€§èƒ½ï¼š</p>
            
            <div class="data-structure-grid">
                <div class="data-structure-card">
                    <h4>ğŸŒ² Bæ ‘ (BTree)</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>ç”¨æˆ·æ•°æ®çš„é«˜æ•ˆå­˜å‚¨å’Œæ£€ç´¢</p>
                    <p><strong>ä¼˜åŠ¿ï¼š</strong>å¹³è¡¡å¤šè·¯æœç´¢æ ‘ï¼Œé€‚åˆç£ç›˜å­˜å‚¨</p>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(log n)</p>
                </div>
                
                <div class="data-structure-card">
                    <h4>ğŸ”´ çº¢é»‘æ ‘ (RB-Tree)</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>æ—¥è®°è¯„åˆ†ç³»ç»Ÿçš„åŠ¨æ€æ’åº</p>
                    <p><strong>ä¼˜åŠ¿ï¼š</strong>è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œæ’å…¥åˆ é™¤é«˜æ•ˆ</p>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(log n)</p>
                </div>
                
                <div class="data-structure-card">
                    <h4>#ï¸âƒ£ å“ˆå¸Œè¡¨ (HashTable)</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>æ™¯ç‚¹ä¿¡æ¯çš„å¿«é€ŸæŸ¥æ‰¾</p>
                    <p><strong>ä¼˜åŠ¿ï¼š</strong>å¹³å‡O(1)æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾</p>
                    <p><strong>ç‰¹ç‚¹ï¼š</strong>æ”¯æŒåŠ¨æ€æ‰©å®¹</p>
                </div>
                
                <div class="data-structure-card">
                    <h4>ğŸ”ï¸ å † (Heap)</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>TopKæ™¯ç‚¹æ¨èã€ä¼˜å…ˆçº§é˜Ÿåˆ—</p>
                    <p><strong>ä¼˜åŠ¿ï¼š</strong>é«˜æ•ˆçš„æœ€å€¼ç»´æŠ¤</p>
                    <p><strong>åº”ç”¨ï¼š</strong>IndexHeapå®ç°æ’åºæ¨è</p>
                </div>
                
                <div class="data-structure-card">
                    <h4>ğŸ”¤ Trieæ ‘</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>ç”¨æˆ·åå‰ç¼€åŒ¹é…å’Œæœç´¢</p>
                    <p><strong>ä¼˜åŠ¿ï¼š</strong>é«˜æ•ˆçš„å­—ç¬¦ä¸²å‰ç¼€æŸ¥è¯¢</p>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(m) mä¸ºå­—ç¬¦ä¸²é•¿åº¦</p>
                </div>
                
                <div class="data-structure-card">
                    <h4>ğŸŒ³ å“ˆå¤«æ›¼æ ‘</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>æ—¥è®°å†…å®¹çš„å‹ç¼©å­˜å‚¨</p>
                    <p><strong>ä¼˜åŠ¿ï¼š</strong>æœ€ä¼˜å‰ç¼€ç¼–ç ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´</p>
                    <p><strong>ç‰¹ç‚¹ï¼š</strong>åŠ¨æ€å‹ç¼©ç‡ä¼˜åŒ–</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸš€ æ ¸å¿ƒç®—æ³•å®ç°</h2>                <div class="mermaid">
                    flowchart LR
                        %% ç®—æ³•ä¸åº”ç”¨çš„å…³ç³»å›¾
                        
                        subgraph ROUTE["ğŸ›£ï¸ è·¯å¾„è§„åˆ’ç®—æ³•"]
                            D["âš¡ Dijkstraç®—æ³•<br/>æœ€çŸ­è·¯å¾„è®¡ç®—"]
                            style D fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        subgraph SORT["ğŸ“Š æ’åºç®—æ³•"]
                            direction TB
                            Q["ğŸ”„ QuickSort<br/>å¿«é€Ÿæ’åº"]
                            M["ğŸ”€ K-Way Merge<br/>å¤šè·¯å½’å¹¶"]
                            style Q fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                            style M fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        subgraph SEARCH["ğŸ” æœç´¢ç®—æ³•"]
                            direction TB
                            KMP["ğŸ”¤ KMPç®—æ³•<br/>å­—ç¬¦ä¸²åŒ¹é…"]
                            POI["ğŸ“ POIæœç´¢<br/>å…´è¶£ç‚¹æ£€ç´¢"]
                            style KMP fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                            style POI fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        subgraph RECOMMEND["ğŸ¯ æ¨èç®—æ³•"]
                            direction TB
                            TR["ğŸ” TopKæ¨è<br/>åŸºäºå †çš„é«˜æ•ˆæ¨è"]
                            CR["ğŸ‘¥ ååŒæ¨è<br/>ç”¨æˆ·è¡Œä¸ºåˆ†æ"]
                            style TR fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                            style CR fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        %% åº”ç”¨æ¨¡å—
                        MAP_MODULE["ğŸ—ºï¸ åœ°å›¾æ¨¡å—"]
                        SPOT_SORT["ğŸï¸ æ™¯ç‚¹æ’åº"]
                        DATA_MERGE["ğŸ“Š æ•°æ®åˆå¹¶"]
                        CONTENT_SEARCH["ğŸ” å†…å®¹æœç´¢"]
                        LOCATION_SERVICE["ğŸ“ ä½ç½®æœåŠ¡"]
                        SPOT_REC["ğŸŒŸ æ™¯ç‚¹æ¨è"]
                        PERSONAL_REC["ğŸ‘¤ ä¸ªæ€§åŒ–æ¨è"]
                        
                        %% æ ·å¼
                        style MAP_MODULE fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                        style SPOT_SORT fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                        style DATA_MERGE fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                        style CONTENT_SEARCH fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                        style LOCATION_SERVICE fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                        style SPOT_REC fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                        style PERSONAL_REC fill:#e8f5e8,stroke:#43a047,stroke-width:2px,color:#000,rounded:true
                        
                        %% è¿æ¥
                        D ==> MAP_MODULE
                        Q ==> SPOT_SORT
                        M ==> DATA_MERGE
                        KMP ==> CONTENT_SEARCH
                        POI ==> LOCATION_SERVICE
                        TR ==> SPOT_REC
                        CR ==> PERSONAL_REC
                        
                        %% å­å›¾æ ·å¼
                        style ROUTE fill:none,stroke:#9c27b0,stroke-width:3px
                        style SORT fill:none,stroke:#9c27b0,stroke-width:3px
                        style SEARCH fill:none,stroke:#9c27b0,stroke-width:3px  
                        style RECOMMEND fill:none,stroke:#9c27b0,stroke-width:3px
                </div>
            
            <div class="performance-metrics">
                <div class="metric-card">
                    <div class="metric-value">O(V log V)</div>
                    <div class="metric-label">Dijkstraç®—æ³•å¤æ‚åº¦</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">O(n log n)</div>
                    <div class="metric-label">å¿«é€Ÿæ’åºå¹³å‡å¤æ‚åº¦</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">O(k log n)</div>
                    <div class="metric-label">TopKæ¨èå¤æ‚åº¦</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">O(1)</div>
                    <div class="metric-label">å“ˆå¸Œè¡¨æŸ¥æ‰¾å¤æ‚åº¦</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ’¾ æ•°æ®å­˜å‚¨æ¶æ„</h2>
            <p>ç³»ç»Ÿé‡‡ç”¨æ–‡ä»¶ç³»ç»Ÿä½œä¸ºæ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆï¼Œæ•°æ®ä»¥JSONæ ¼å¼å­˜å‚¨ï¼Œç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ï¼š</p>                <div class="mermaid">
                    flowchart TD
                        %% æ•°æ®ç›®å½•ç»“æ„
                        subgraph DATA_DIR["æ•°æ®ç›®å½•ç»“æ„"]
                            ROOT["ğŸ“‚ data/"]
                            CONFIG["âš™ï¸ config/<br/>ç³»ç»Ÿé…ç½®æ–‡ä»¶"]
                            USERS["ğŸ‘¥ users/<br/>ç”¨æˆ·æ•°æ®"]
                            SPOTS["ğŸï¸ scenic_spots/<br/>æ™¯ç‚¹æ•°æ®"]
                            DIARIES["ğŸ“– diaries/<br/>æ—¥è®°æ•°æ®"]
                            MAP["ğŸ—ºï¸ map/<br/>åœ°å›¾æ•°æ®"]
                            
                            ROOT --> CONFIG
                            ROOT --> USERS
                            ROOT --> SPOTS
                            ROOT --> DIARIES
                            ROOT --> MAP
                            
                            %% æ ·å¼
                            style ROOT fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000,rounded:true
                            style CONFIG fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000,rounded:true
                            style USERS fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000,rounded:true
                            style SPOTS fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000,rounded:true
                            style DIARIES fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000,rounded:true
                            style MAP fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        %% æ–‡ä»¶IOæ¨¡å—
                        subgraph FILEIO_MODULE["æ–‡ä»¶IOæ¨¡å—"]
                            FILEIO["âš™ï¸ fileIo.py<br/>ç»Ÿä¸€æ–‡ä»¶æ“ä½œæ¥å£"]
                            style FILEIO fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#000,rounded:true
                        end
                        
                        %% æ•°æ®æµå‘
                        FILEIO -.-> CONFIG & USERS & SPOTS & DIARIES & MAP
                        
                        %% å­å›¾æ ·å¼
                        style DATA_DIR fill:none,stroke:#e91e63,stroke-width:3px
                        style FILEIO_MODULE fill:none,stroke:#9c27b0,stroke-width:3px
                </div>
            
            <div class="code-block">
æ•°æ®å­˜å‚¨ç‰¹ç‚¹:
- JSONæ ¼å¼å­˜å‚¨ï¼Œç»“æ„åŒ–æ•°æ®ç®¡ç†
- åˆ†ç±»å­˜å‚¨ï¼Œæé«˜è¯»å†™æ•ˆç‡
- å“ˆå¤«æ›¼ç¼–ç å‹ç¼©ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´
- ç»Ÿä¸€æ–‡ä»¶IOæ¥å£ï¼Œä¾¿äºç»´æŠ¤
- æ”¯æŒå¢é‡æ›´æ–°å’Œæ‰¹é‡æ“ä½œ
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”„ ç³»ç»Ÿå·¥ä½œæµç¨‹</h2>                <div class="mermaid">
                    sequenceDiagram
                        participant U as ğŸ‘¤ ç”¨æˆ·
                        participant V as ğŸ¨ Viewå±‚
                        participant C as ğŸ® Controllerå±‚
                        participant M as ğŸ—„ï¸ Modelå±‚
                        participant A as ğŸ”§ Algorithmå±‚
                        participant D as ğŸ’¾ æ•°æ®å±‚
                        
                        U->>+V: 1. è®¿é—®é¡µé¢/å‘é€è¯·æ±‚
                        V->>+C: 2. è·¯ç”±è½¬å‘
                        
                        rect rgb(255, 243, 224)
                          C->>C: 3. è¯·æ±‚éªŒè¯å’Œé¢„å¤„ç†
                        end
                        
                        C->>+M: 4. è°ƒç”¨ä¸šåŠ¡é€»è¾‘
                        
                        rect rgb(232, 245, 232)
                          M->>A: 5.1 è°ƒç”¨ç›¸å…³ç®—æ³•
                          A-->>M: 5.2 è¿”å›è®¡ç®—ç»“æœ
                        end
                        
                        M->>+D: 6. æ•°æ®è¯»å†™æ“ä½œ
                        D-->>-M: 7. è¿”å›æ•°æ®
                        
                        M-->>-C: 8. è¿”å›å¤„ç†ç»“æœ
                        C->>-V: 9. æ¸²æŸ“æ¨¡æ¿/JSONå“åº”
                        V-->>-U: 10. å±•ç¤ºç»“æœ
                        
                        note over V,C: Flaskè·¯ç”±ç³»ç»Ÿ
                        note over M,A: ä¸šåŠ¡é€»è¾‘å±‚
                        note over D: JSONæ–‡ä»¶å­˜å‚¨
                </div>
        </div>

        <div class="section">
            <h2>ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</h2>
            
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>åŠŸèƒ½æ¨¡å—</th>
                            <th>ä¸»è¦æ•°æ®ç»“æ„</th>
                            <th>æ ¸å¿ƒç®—æ³•</th>
                            <th>æ€§èƒ½ç‰¹ç‚¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ç”¨æˆ·ç®¡ç†</strong></td>
                            <td>Bæ ‘, Trieæ ‘, é›†åˆ</td>
                            <td>å“ˆå¸ŒåŠ å¯†, å‰ç¼€åŒ¹é…</td>
                            <td>å¿«é€Ÿæ£€ç´¢, å®‰å…¨å­˜å‚¨</td>
                        </tr>
                        <tr>
                            <td><strong>æ™¯ç‚¹æ¨è</strong></td>
                            <td>å †, å“ˆå¸Œè¡¨, çº¢é»‘æ ‘</td>
                            <td>TopKç®—æ³•, ååŒè¿‡æ»¤</td>
                            <td>ä¸ªæ€§åŒ–æ¨è, å®æ—¶æ’åº</td>
                        </tr>
                        <tr>
                            <td><strong>è·¯å¾„è§„åˆ’</strong></td>
                            <td>å›¾, ä¼˜å…ˆé˜Ÿåˆ—</td>
                            <td>Dijkstraç®—æ³•</td>
                            <td>æœ€çŸ­è·¯å¾„, å¤šç‚¹è§„åˆ’</td>
                        </tr>
                        <tr>
                            <td><strong>æ—¥è®°ç®¡ç†</strong></td>
                            <td>çº¢é»‘æ ‘, å“ˆå¤«æ›¼æ ‘</td>
                            <td>åŠ¨æ€æ’åº, æ•°æ®å‹ç¼©</td>
                            <td>é«˜æ•ˆå­˜å‚¨, å¿«é€Ÿæ£€ç´¢</td>
                        </tr>
                        <tr>
                            <td><strong>æœç´¢æœåŠ¡</strong></td>
                            <td>Trieæ ‘, å“ˆå¸Œè¡¨</td>
                            <td>KMPç®—æ³•, POIæ£€ç´¢</td>
                            <td>æ¨¡ç³ŠåŒ¹é…, åœ°ç†æœç´¢</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <h2>âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
            
            <div class="data-structure-grid">
                <div class="data-structure-card">
                    <h4>ğŸš€ ç®—æ³•ä¼˜åŒ–</h4>
                    <ul>
                        <li>ä½¿ç”¨å †æ•°æ®ç»“æ„å®ç°O(log n)çš„TopKæ¨è</li>
                        <li>å“ˆå¸Œè¡¨æä¾›O(1)å¹³å‡æŸ¥æ‰¾æ—¶é—´</li>
                        <li>Bæ ‘ä¼˜åŒ–ç£ç›˜I/Oæ“ä½œ</li>
                        <li>å¤šè·¯å½’å¹¶ä¼˜åŒ–å¤§æ•°æ®æ’åº</li>
                    </ul>
                </div>
                
                <div class="data-structure-card">
                    <h4>ğŸ’¾ å­˜å‚¨ä¼˜åŒ–</h4>
                    <ul>
                        <li>å“ˆå¤«æ›¼ç¼–ç å‹ç¼©æ—¥è®°å†…å®¹</li>
                        <li>åˆ†å±‚å­˜å‚¨ç­–ç•¥å‡å°‘I/Oå¼€é”€</li>
                        <li>ç´¢å¼•ç»“æ„åŠ é€Ÿæ•°æ®æ£€ç´¢</li>
                        <li>ç¼“å­˜æœºåˆ¶å‡å°‘é‡å¤è®¡ç®—</li>
                    </ul>
                </div>
                
                <div class="data-structure-card">
                    <h4>ğŸ”„ å¹¶å‘ä¼˜åŒ–</h4>
                    <ul>
                        <li>æ— é”æ•°æ®ç»“æ„è®¾è®¡</li>
                        <li>è¯»å†™åˆ†ç¦»ç­–ç•¥</li>
                        <li>æ‰¹é‡æ“ä½œå‡å°‘ç³»ç»Ÿè°ƒç”¨</li>
                        <li>å¼‚æ­¥å¤„ç†æå‡å“åº”é€Ÿåº¦</li>
                    </ul>
                </div>
                
                <div class="data-structure-card">
                    <h4>ğŸ¯ ä¸šåŠ¡ä¼˜åŒ–</h4>
                    <ul>
                        <li>æ™ºèƒ½æ¨èç®—æ³•ä¸ªæ€§åŒ–</li>
                        <li>åœ°ç†ä½ç½®ç´¢å¼•ä¼˜åŒ–æœç´¢</li>
                        <li>ç”¨æˆ·è¡Œä¸ºåˆ†ææå‡ä½“éªŒ</li>
                        <li>åŠ¨æ€è¯„åˆ†ç³»ç»Ÿå®æ—¶æ›´æ–°</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ›¡ï¸ ç³»ç»Ÿå®‰å…¨ä¸å¯é æ€§</h2>
            
            <div class="mvc-layer">
                <h3>ğŸ” å®‰å…¨æœºåˆ¶</h3>
                <ul>
                    <li><strong>å¯†ç å®‰å…¨ï¼š</strong>ä½¿ç”¨åŠ ç›å“ˆå¸Œ(Salt + Hash)å­˜å‚¨ç”¨æˆ·å¯†ç </li>
                    <li><strong>ä¼šè¯ç®¡ç†ï¼š</strong>HTTPOnly Cookieé˜²æ­¢XSSæ”»å‡»</li>
                    <li><strong>è¾“å…¥éªŒè¯ï¼š</strong>æœåŠ¡ç«¯æ•°æ®éªŒè¯é˜²æ­¢æ³¨å…¥æ”»å‡»</li>
                    <li><strong>è®¿é—®æ§åˆ¶ï¼š</strong>åŸºäºä¼šè¯çš„ç”¨æˆ·æƒé™éªŒè¯</li>
                </ul>
            </div>
            
            <div class="mvc-layer">
                <h3>ğŸ”§ å¯é æ€§ä¿éšœ</h3>
                <ul>
                    <li><strong>é”™è¯¯å¤„ç†ï¼š</strong>å®Œå–„çš„å¼‚å¸¸æ•è·å’Œå¤„ç†æœºåˆ¶</li>
                    <li><strong>æ•°æ®ä¸€è‡´æ€§ï¼š</strong>åŸå­æ“ä½œä¿è¯æ•°æ®å®Œæ•´æ€§</li>
                    <li><strong>æ•…éšœæ¢å¤ï¼š</strong>æ•°æ®å¤‡ä»½å’Œæ¢å¤æœºåˆ¶</li>
                    <li><strong>æ€§èƒ½ç›‘æ§ï¼š</strong>ç®—æ³•å¤æ‚åº¦åˆ†æå’Œæ€§èƒ½æµ‹è¯•</li>
                </ul>
            </div>
        </div>

        <div class="summary-box">
            <h2 style="color: white; border: none;">ğŸ‰ æ¶æ„æ€»ç»“</h2>
            <p>æœ¬ä¸ªæ€§åŒ–æ—…æ¸¸ç³»ç»Ÿé‡‡ç”¨äº†ç°ä»£åŒ–çš„MVCæ¶æ„è®¾è®¡ï¼Œç»“åˆå¤šç§é«˜æ•ˆæ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œå®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ€§èƒ½ä¼˜å¼‚çš„æ—…æ¸¸æ¨èå¹³å°ã€‚ç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„æ¨¡å—åŒ–è®¾è®¡ã€å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ï¼Œæ˜¯æ•°æ®ç»“æ„ä¸ç®—æ³•åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨çš„ä¼˜ç§€å…¸èŒƒã€‚</p>
            
            <div class="performance-metrics" style="margin-top: 30px;">
                <div class="metric-card">
                    <div class="metric-value">12+</div>
                    <div class="metric-label">æ ¸å¿ƒæ•°æ®ç»“æ„</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">8+</div>
                    <div class="metric-label">ç®—æ³•å®ç°</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">5+</div>
                    <div class="metric-label">åŠŸèƒ½æ¨¡å—</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">MVC</div>
                    <div class="metric-label">æ¶æ„æ¨¡å¼</div>
                </div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px; color: #666; font-size: 14px;">
            <p>ğŸ“… æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2025å¹´6æœˆ4æ—¥</p>
            <p>ğŸ”§ åˆ†æå·¥å…·: GitHub Copilot AI Architecture Analyzer</p>
        </div>
    </div>

    <script>        // åˆå§‹åŒ–Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#e8f4fd',
                primaryTextColor: '#000000',
                primaryBorderColor: '#1e88e5',
                lineColor: '#666666',
                secondaryColor: '#fff3e0',
                tertiaryColor: '#e8f5e8',
                background: '#ffffff',
                mainBkg: '#ffffff',
                secondBkg: '#f8f9fa',
                tertiaryBkg: '#e9ecef'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis',
                padding: 15,
                nodeSpacing: 50,
                rankSpacing: 80
            },
            sequence: {
                useMaxWidth: true,
                showSequenceNumbers: true,
                messageFontSize: 14,
                noteFontSize: 12
            }
        });
        
        // æ·»åŠ äº¤äº’æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            // ä¸ºæ•°æ®ç»“æ„å¡ç‰‡æ·»åŠ ç‚¹å‡»æ•ˆæœ
            const cards = document.querySelectorAll('.data-structure-card, .metric-card');
            cards.forEach(card => {
                card.addEventListener('click', function() {
                    this.style.transform = 'scale(1.05)';
                    setTimeout(() => {
                        this.style.transform = 'translateY(-5px)';
                    }, 200);
                });
            });
            
            // å¹³æ»‘æ»šåŠ¨æ•ˆæœ
            const links = document.querySelectorAll('a[href^="#"]');
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>
