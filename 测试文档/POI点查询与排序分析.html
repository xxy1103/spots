<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POIç‚¹æŸ¥è¯¢ä¸åŸºäºè·¯å¾„è·ç¦»çš„æ’åºç³»ç»Ÿåˆ†æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 6px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 3px;
        }

        h1 {
            font-size: 2.8em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            font-size: 1.2em;
            color: #7f8c8d;
            font-weight: 300;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .section h2 {
            font-size: 2em;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, #e74c3c, #f39c12);
            border-radius: 2px;
        }

        .section h3 {
            font-size: 1.4em;
            color: #34495e;
            margin: 25px 0 15px 0;
            padding: 10px 0;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            background: linear-gradient(90deg, rgba(52, 152, 219, 0.1), transparent);
        }        .code-block {
            background: linear-gradient(145deg, #2c3e50, #34495e);
            color: #ecf0f1;
            padding: 25px;
            border-radius: 12px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            margin: 20px 0;
            overflow-x: auto;
            box-shadow: 
                inset 0 2px 10px rgba(0, 0, 0, 0.3),
                0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #34495e;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .code-block::before {
            content: "Python";
            position: absolute;
            top: 8px;
            right: 15px;
            background: rgba(231, 76, 60, 0.8);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }        .code-block {
            position: relative;
        }

        /* Python è¯­æ³•é«˜äº®æ ·å¼ */
        .code-block .comment {
            color: #7f8c8d;
            font-style: italic;
        }

        .code-block .keyword {
            color: #3498db;
            font-weight: bold;
        }

        .code-block .string {
            color: #2ecc71;
        }

        .code-block .number {
            color: #e67e22;
        }

        .code-block .function {
            color: #f39c12;
        }        .mermaid {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid #ecf0f1;
            overflow-x: auto;
            max-width: 100%;
        }

        /* Mermaidå›¾è¡¨ä¼˜åŒ–æ ·å¼ */
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }

        .mermaid .node rect {
            stroke-width: 2px !important;
        }

        .mermaid .node text {
            font-size: 12px !important;
            font-weight: 500 !important;
        }

        .mermaid .edgeLabel {
            font-size: 10px !important;
            background: rgba(255, 255, 255, 0.8) !important;
            padding: 2px 4px !important;
            border-radius: 3px !important;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        th {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        tr:hover {
            background: rgba(52, 152, 219, 0.05);
            transform: translateY(-1px);
            transition: all 0.3s ease;
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #e74c3c;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .note {
            background: linear-gradient(120deg, #ffecd2 0%, #fcb69f 100%);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #f39c12;
            font-style: italic;
        }

        .algorithm-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .algorithm-box h4 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #fff;
        }

        .complexity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .complexity-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-top: 4px solid #e74c3c;
        }

        .workflow-step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .step-number {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        ul {
            padding-left: 20px;
        }

        li {
            margin-bottom: 8px;
            position: relative;
        }

        li::marker {
            color: #3498db;
            font-weight: bold;
        }

        .toc {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 40px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .toc h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5em;
        }

        .toc ul {
            list-style: none;
            padding: 0;
        }

        .toc li {
            margin: 10px 0;
        }

        .toc a {
            color: #34495e;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 8px;
            display: block;
            transition: all 0.3s ease;
        }

        .toc a:hover {
            background: white;
            color: #3498db;
            transform: translateX(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            h1 {
                font-size: 2em;
            }

            .section {
                padding: 20px;
            }

            .complexity-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3498db',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#2980b9',
                lineColor: '#34495e',
                secondaryColor: '#ecf0f1',
                tertiaryColor: '#f8f9fa'
            }
        });
    </script>
</head>
<body>
    <div class="container">        <div class="header">
            <h1>POIç‚¹æŸ¥è¯¢ä¸åŸºäºè·¯å¾„è·ç¦»çš„æ’åºç³»ç»Ÿåˆ†æ</h1>
            <p class="subtitle">ä¸ªæ€§åŒ–æ—…æ¸¸ç³»ç»Ÿ - å…´è¶£ç‚¹æœç´¢ä¸æ™ºèƒ½æ’åºåŠŸèƒ½æ·±åº¦è§£æ</p>
            <div style="margin-top: 20px; padding: 15px; background: rgba(46, 204, 113, 0.1); border-left: 4px solid #2ecc71; border-radius: 8px;">
                <p style="margin: 0; color: #27ae60; font-weight: 500;">
                    ğŸ“ <strong>ä»£ç ä¼˜åŒ–è¯´æ˜ï¼š</strong>æœ¬æŠ¥å‘Šä¸­çš„æ‰€æœ‰ä»£ç å—å·²ç»è¿‡ç»“æ„åŒ–ä¼˜åŒ–ï¼Œ
                    åŒ…å«æ¸…æ™°çš„æ³¨é‡Šã€åˆ†æ­¥è¯´æ˜ã€ç±»å‹æ ‡æ³¨å’Œå‚æ•°è§£é‡Šï¼Œä¾¿äºç†è§£å’Œç»´æŠ¤ã€‚
                </p>
            </div>
        </div>

        <div class="toc">
            <h3>ğŸ“‹ ç›®å½•å¯¼èˆª</h3>
            <ul>
                <li><a href="#overview">1. ç³»ç»Ÿæ¦‚è¿°</a></li>
                <li><a href="#architecture">2. POIç³»ç»Ÿæ¶æ„</a></li>
                <li><a href="#api-analysis">3. APIæ¥å£åˆ†æ</a></li>
                <li><a href="#core-algorithms">4. æ ¸å¿ƒç®—æ³•å®ç°</a></li>
                <li><a href="#data-structures">5. æ•°æ®ç»“æ„åˆ†æ</a></li>
                <li><a href="#complexity-analysis">6. å¤æ‚åº¦åˆ†æ</a></li>
                <li><a href="#workflow">7. å·¥ä½œæµç¨‹å›¾</a></li>
                <li><a href="#performance">8. æ€§èƒ½ä¼˜åŒ–</a></li>
            </ul>
        </div>

        <div id="overview" class="section">
            <h2>1. ç³»ç»Ÿæ¦‚è¿°</h2>
            <p>POIï¼ˆPoint of Interestï¼Œå…´è¶£ç‚¹ï¼‰æŸ¥è¯¢ä¸æ’åºç³»ç»Ÿæ˜¯ä¸ªæ€§åŒ–æ—…æ¸¸ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
            
            <div class="highlight">
                <h3>ğŸ¯ æ ¸å¿ƒåŠŸèƒ½</h3>
                <ul>
                    <li><strong>POIæŸ¥è¯¢</strong>ï¼šåŸºäºç™¾åº¦åœ°å›¾APIï¼ŒæŒ‰ç±»å‹å’Œä½ç½®æœç´¢å‘¨è¾¹å…´è¶£ç‚¹</li>
                    <li><strong>è·¯å¾„è·ç¦»è®¡ç®—</strong>ï¼šä½¿ç”¨Dijkstraç®—æ³•è®¡ç®—çœŸå®è·¯å¾„è·ç¦»</li>
                    <li><strong>æ™ºèƒ½æ’åº</strong>ï¼šåŸºäºè·ç¦»å’Œè¯„åˆ†çš„å¤šç»´åº¦æ’åº</li>
                    <li><strong>ç±»å‹åˆå¹¶</strong>ï¼šä½¿ç”¨Kè·¯å½’å¹¶ç®—æ³•æ•´åˆå¤šç±»å‹POI</li>
                    <li><strong>åæ ‡è½¬æ¢</strong>ï¼šWGS84ä¸GCJ02åæ ‡ç³»ç»Ÿè½¬æ¢</li>
                </ul>
            </div>

            <div class="note">
                <strong>ğŸ’¡ è®¾è®¡ç†å¿µï¼š</strong>ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå°†APIè°ƒç”¨ã€æ•°æ®å¤„ç†ã€ç®—æ³•è®¡ç®—å’Œç»“æœæ’åºåˆ†ç¦»ï¼Œç¡®ä¿é«˜å†…èšä½è€¦åˆï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚
            </div>
        </div>

        <div id="architecture" class="section">
            <h2>2. POIç³»ç»Ÿæ¶æ„</h2>
            
            <div class="mermaid">
                graph TB
                    A[ç”¨æˆ·è¯·æ±‚] --> B{è¯·æ±‚ç±»å‹}
                    B -->|å•ä¸€POIç±»å‹| C[getPoiByKeyword]
                    B -->|æ‰€æœ‰POIç±»å‹| D[getPoi]
                    B -->|æŒ‡å®šæ™¯ç‚¹POI| E[getPoiData]
                    
                    C --> F[Map.get_POI_reversal]
                    D --> G[éå†æ‰€æœ‰POIç±»å‹]
                    E --> F
                    
                    G --> H[å¤šæ¬¡è°ƒç”¨get_POI_reversal]
                    H --> I[Kè·¯å½’å¹¶æ’åº]
                    F --> J[POISearch.search]
                    
                    J --> K[ç™¾åº¦åœ°å›¾APIè°ƒç”¨]
                    K --> L[åæ ‡ç³»è½¬æ¢]
                    L --> M[POIè¯¦æƒ…æå–]
                    M --> N{ä½¿ç”¨Dijkstra?}
                    
                    N -->|æ˜¯| O[Dijkstraè·ç¦»è®¡ç®—]
                    N -->|å¦| P[ç›´çº¿è·ç¦»è®¡ç®—]
                    
                    O --> Q[å¿«é€Ÿæ’åº]
                    P --> Q
                    Q --> R[è¿”å›æ’åºç»“æœ]
                    
                    I --> S[åˆ—è¡¨åè½¬]
                    S --> T[JSONå“åº”]
                    R --> T
                    
                    style A fill:#e1f5fe
                    style K fill:#fff3e0
                    style O fill:#f3e5f5
                    style Q fill:#e8f5e8
                    style T fill:#fce4ec
            </div>

            <h3>ğŸ“¦ æ ¸å¿ƒæ¨¡å—ç»„æˆ</h3>
            <table>
                <thead>
                    <tr>
                        <th>æ¨¡å—</th>
                        <th>æ–‡ä»¶è·¯å¾„</th>
                        <th>ä¸»è¦èŒè´£</th>
                        <th>å…³é”®æ–¹æ³•</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>è·¯ç”±å±‚</td>
                        <td>app/map/routes.py</td>
                        <td>HTTPè¯·æ±‚å¤„ç†ä¸å“åº”</td>
                        <td>getPoi, getPoiByKeyword, getPoiData</td>
                    </tr>
                    <tr>
                        <td>ä¸šåŠ¡å±‚</td>
                        <td>module/map.py</td>
                        <td>POIä¸šåŠ¡é€»è¾‘å°è£…</td>
                        <td>get_POI_reversal</td>
                    </tr>
                    <tr>
                        <td>æœç´¢å¼•æ“</td>
                        <td>module/data_structure/POiSearch.py</td>
                        <td>POIæœç´¢ä¸æ•°æ®å¤„ç†</td>
                        <td>search, get_poi_details</td>
                    </tr>
                    <tr>
                        <td>è·¯å¾„è®¡ç®—</td>
                        <td>module/data_structure/dijkstra.py</td>
                        <td>æœ€çŸ­è·¯å¾„ç®—æ³•å®ç°</td>
                        <td>calculate_distances_to_points</td>
                    </tr>
                    <tr>
                        <td>æ’åºç®—æ³•</td>
                        <td>module/data_structure/quicksort.py</td>
                        <td>å¿«é€Ÿæ’åºå®ç°</td>
                        <td>quicksort, partition</td>
                    </tr>
                    <tr>
                        <td>åˆå¹¶ç®—æ³•</td>
                        <td>module/data_structure/kwaymerge.py</td>
                        <td>Kè·¯å½’å¹¶æ’åº</td>
                        <td>k_way_merge_descending</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="api-analysis" class="section">
            <h2>3. APIæ¥å£åˆ†æ</h2>
            
            <h3>ğŸ”Œ POIæŸ¥è¯¢æ¥å£</h3>
            
            <div class="algorithm-box">
                <h4>æ¥å£1: /api/poi/&lt;location&gt;</h4>
                <p><strong>åŠŸèƒ½ï¼š</strong>è·å–æŒ‡å®šä½ç½®æ‰€æœ‰ç±»å‹çš„POIï¼Œå¹¶è¿›è¡Œåˆå¹¶æ’åº</p>
                <p><strong>æµç¨‹ï¼š</strong>éå†é…ç½®çš„æ‰€æœ‰POIç±»å‹ â†’ å¹¶è¡ŒæŸ¥è¯¢ â†’ Kè·¯å½’å¹¶ â†’ åè½¬æ’åº</p>
            </div>            <div class="code-block">
@map.route('/api/poi/&lt;location&gt;')
def getPoi(location):
    """
    è·å–æŒ‡å®šä½ç½®æ‰€æœ‰ç±»å‹çš„POIï¼Œå¹¶è¿›è¡Œåˆå¹¶æ’åº
    
    Args:
        location (str): ä½ç½®åæ ‡ï¼Œæ ¼å¼ä¸º"çº¬åº¦,ç»åº¦"
    
    Returns:
        JSON: æŒ‰è·ç¦»å‡åºæ’åˆ—çš„POIåˆ—è¡¨
    """
    all_pois = []
    
    # Step 1: è·å–é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰POIç±»å‹
    POI_types = configIo.getAllPoiTypes()
    
    # Step 2: éå†æ¯ç§POIç±»å‹ï¼Œåˆ†åˆ«è¿›è¡Œå¹¶è¡ŒæŸ¥è¯¢
    for poi_type in POI_types:
        poi_list = map_module.get_POI_reversal(
            poi_type,       # POIç±»å‹ï¼ˆé¤å…ã€é…’åº—ç­‰ï¼‰
            location,       # æœç´¢ä¸­å¿ƒç‚¹åæ ‡
            500            # æœç´¢åŠå¾„ï¼š500ç±³
        )
        
        # Step 3: éªŒè¯è¿”å›ç»“æœçš„æœ‰æ•ˆæ€§
        if isinstance(poi_list, list):
            all_pois.append(poi_list)
    
    # Step 4: ä½¿ç”¨Kè·¯å½’å¹¶ç®—æ³•åˆå¹¶æ‰€æœ‰ç±»å‹çš„POI
    # è¾“å…¥ï¼šå¤šä¸ªå·²æŒ‰è·ç¦»é™åºæ’åˆ—çš„POIåˆ—è¡¨
    # è¾“å‡ºï¼šå…¨å±€æŒ‰è·ç¦»é™åºæ’åˆ—çš„åˆå¹¶åˆ—è¡¨
    all_pois = k_way_merge_descending(all_pois)
    
    # Step 5: åè½¬åˆ—è¡¨é¡ºåºï¼ˆä»é™åºå˜ä¸ºå‡åºï¼‰
    # å‰ç«¯éœ€è¦æŒ‰è·ç¦»ä»è¿‘åˆ°è¿œæ˜¾ç¤ºPOI
    all_pois = all_pois[::-1]
    
    return jsonify(all_pois)
            </div>

            <div class="algorithm-box">
                <h4>æ¥å£2: /api/poi/&lt;location&gt;/&lt;keyword&gt;</h4>
                <p><strong>åŠŸèƒ½ï¼š</strong>æ ¹æ®å…³é”®è¯æŸ¥è¯¢ç‰¹å®šç±»å‹çš„POI</p>
                <p><strong>æµç¨‹ï¼š</strong>å•ä¸€ç±»å‹æŸ¥è¯¢ â†’ æ’åº â†’ åè½¬è¿”å›</p>
            </div>

            <div class="algorithm-box">
                <h4>æ¥å£3: /api/poi/data/&lt;int:spot_id&gt;</h4>
                <p><strong>åŠŸèƒ½ï¼š</strong>è·å–æŒ‡å®šæ™¯ç‚¹å‘¨è¾¹çš„é»˜è®¤POIï¼ˆæ™¯ç‚¹ç±»å‹ï¼‰</p>
                <p><strong>æµç¨‹ï¼š</strong>æ™¯ç‚¹å®šä½ â†’ å‘¨è¾¹æœç´¢ â†’ è·ç¦»æ’åº</p>
            </div>

            <h3>ğŸ·ï¸ æ”¯æŒçš„POIç±»å‹</h3>
            <table>
                <thead>
                    <tr>
                        <th>ç±»å‹</th>
                        <th>ç”¨é€”</th>
                        <th>æœç´¢åŠå¾„</th>
                        <th>ä¼˜å…ˆçº§</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>é¤å…</td><td>ç”¨é¤æœåŠ¡</td><td>500m</td><td>é«˜</td></tr>
                    <tr><td>é…’åº—</td><td>ä½å®¿æœåŠ¡</td><td>500m</td><td>é«˜</td></tr>
                    <tr><td>è¶…å¸‚</td><td>è´­ç‰©ä¾¿åˆ©</td><td>500m</td><td>ä¸­</td></tr>
                    <tr><td>åŒ»é™¢</td><td>åŒ»ç–—æœåŠ¡</td><td>500m</td><td>é«˜</td></tr>
                    <tr><td>é“¶è¡Œ</td><td>é‡‘èæœåŠ¡</td><td>500m</td><td>ä¸­</td></tr>
                    <tr><td>åŠ æ²¹ç«™</td><td>äº¤é€šæœåŠ¡</td><td>500m</td><td>ä¸­</td></tr>
                    <tr><td>åœè½¦åœº</td><td>åœè½¦æœåŠ¡</td><td>500m</td><td>ä¸­</td></tr>
                    <tr><td>å¥¶èŒ¶åº—</td><td>ä¼‘é—²é¥®å“</td><td>500m</td><td>ä½</td></tr>
                    <tr><td>æ¸¸å®¢ä¸­å¿ƒ</td><td>æ—…æ¸¸æœåŠ¡</td><td>500m</td><td>é«˜</td></tr>
                    <tr><td>å•æ‰€</td><td>åŸºç¡€è®¾æ–½</td><td>500m</td><td>ä¸­</td></tr>
                </tbody>
            </table>
        </div>

        <div id="core-algorithms" class="section">
            <h2>4. æ ¸å¿ƒç®—æ³•å®ç°</h2>
            
            <h3>ğŸ” POIæœç´¢ç®—æ³•</h3>
            
            <div class="workflow-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <strong>åæ ‡è½¬æ¢ï¼š</strong>å°†WGS84åæ ‡è½¬æ¢ä¸ºGCJ02åæ ‡ï¼ˆç™¾åº¦åœ°å›¾ä½¿ç”¨ï¼‰
                </div>
            </div>

            <div class="workflow-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <strong>APIè°ƒç”¨ï¼š</strong>æ„å»ºè¯·æ±‚å‚æ•°ï¼Œè°ƒç”¨ç™¾åº¦åœ°å›¾POIæœç´¢API
                </div>
            </div>

            <div class="workflow-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <strong>æ•°æ®å¤„ç†ï¼š</strong>è§£æAPIè¿”å›ç»“æœï¼Œæå–POIåŸºæœ¬ä¿¡æ¯
                </div>
            </div>

            <div class="workflow-step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <strong>è·ç¦»è®¡ç®—ï¼š</strong>ä½¿ç”¨Dijkstraç®—æ³•è®¡ç®—çœŸå®è·¯å¾„è·ç¦»
                </div>
            </div>            <div class="code-block">
def search(self, query, location, radius=500, page_num=0, page_size=20):
    """
    æœç´¢å‘¨è¾¹POIç‚¹
    
    Args:
        query (str): æœç´¢å…³é”®è¯ï¼ˆå¦‚"é¤å…"ã€"é…’åº—"ç­‰ï¼‰
        location (str): ä½ç½®åæ ‡ï¼Œæ ¼å¼ä¸º"çº¬åº¦,ç»åº¦"
        radius (int): æœç´¢åŠå¾„ï¼Œå•ä½ä¸ºç±³ï¼Œé»˜è®¤500ç±³
        page_num (int): é¡µç ï¼Œé»˜è®¤ä¸º0
        page_size (int): æ¯é¡µè¿”å›çš„POIæ•°é‡ï¼Œé»˜è®¤ä¸º20
    
    Returns:
        tuple: (APIå“åº”JSON, æŸ¥è¯¢å…³é”®è¯)
    """
    
    # Step 1: åæ ‡è½¬æ¢
    # å°†WGS84åæ ‡è½¬æ¢ä¸ºGCJ02åæ ‡ï¼ˆç™¾åº¦åœ°å›¾æ‰€éœ€ï¼‰
    lat, lng = map(float, location.split(","))
    result = wgs84_to_gcj02(lng, lat)
    location = f"{result[1]},{result[0]}"
    
    # Step 2: æ„å»ºç™¾åº¦åœ°å›¾APIè¯·æ±‚å‚æ•°
    params = {
        "query": query,                # æœç´¢å…³é”®è¯
        "location": location,          # æœç´¢ä¸­å¿ƒç‚¹
        "radius": radius,              # æœç´¢åŠå¾„
        "page_num": page_num,          # åˆ†é¡µé¡µç 
        "page_size": page_size,        # æ¯é¡µæ•°é‡
        "output": "json",              # è¿”å›æ ¼å¼
        "ak": self.ak,                 # APIå¯†é’¥
        "coord_type": 2,               # è¾“å…¥åæ ‡ç³»ï¼šGCJ02
        "ret_coordtype": "gcj02ll"     # è¿”å›åæ ‡ç³»ï¼šGCJ02ç»çº¬åº¦
    }
    
    # Step 3: å‘é€HTTPè¯·æ±‚åˆ°ç™¾åº¦åœ°å›¾POIæœç´¢API
    response = requests.get(
        url=self.host + self.uri,      # å®Œæ•´APIåœ°å€
        params=params                  # è¯·æ±‚å‚æ•°
    )
    
    return response.json(), query
            </div>

            <h3>ğŸ“ Dijkstraè·ç¦»è®¡ç®—ç®—æ³•</h3>
            
            <div class="highlight">
                <h4>å¤šç›®æ ‡è·ç¦»è®¡ç®—ä¼˜åŒ–</h4>
                <p>ç³»ç»Ÿé‡‡ç”¨å•æºå¤šç›®æ ‡çš„Dijkstraç®—æ³•ï¼Œä¸€æ¬¡è®¡ç®—å³å¯è·å¾—èµ·ç‚¹åˆ°æ‰€æœ‰POIçš„æœ€çŸ­è·¯å¾„è·ç¦»ï¼Œé¿å…äº†å¤šæ¬¡å•ç‹¬è®¡ç®—çš„å¼€é”€ã€‚</p>
            </div>            <div class="code-block">
def calculate_distances_to_points(self, start_coordinate: str, 
                                 target_points: List[dict], 
                                 optimize_for: str = 'distance') -> List[dict]:
    """
    ä½¿ç”¨ä¸€æ¬¡Dijkstraç®—æ³•è®¡ç®—ä»èµ·ç‚¹åˆ°å¤šä¸ªç›®æ ‡ç‚¹çš„è·ç¦»æˆ–æ—¶é—´
    
    Args:
        start_coordinate (str): èµ·ç‚¹åæ ‡å­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º"çº¬åº¦,ç»åº¦"
        target_points (List[dict]): ç›®æ ‡POIç‚¹åˆ—è¡¨
        optimize_for (str): ä¼˜åŒ–ç›®æ ‡ï¼Œ'distance'æˆ–'time'
    
    Returns:
        List[dict]: åŒ…å«è·ç¦»/æ—¶é—´ä¿¡æ¯çš„POIåˆ—è¡¨
    
    ç®—æ³•æ ¸å¿ƒï¼š
        1. å•æºå¤šç›®æ ‡Dijkstraç®—æ³•
        2. é¿å…å¤šæ¬¡å•ç‹¬è®¡ç®—çš„å¼€é”€
        3. ä¸€æ¬¡éå†è·å¾—æ‰€æœ‰è·ç¦»
    """
    
    # Step 1: è§£æèµ·ç‚¹åæ ‡å¹¶è·å–æœ€è¿‘çš„è·¯ç½‘èŠ‚ç‚¹
    lat_str, lng_str = start_coordinate.split(',')
    start_lat = float(lat_str.strip())
    start_lng = float(lng_str.strip())
    
    # åœ¨è·¯ç½‘ä¸­æ‰¾åˆ°è·ç¦»èµ·ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹
    start_node = self.graph.find_nearest_node(start_lat, start_lng)
    
    # Step 2: æå–æ‰€æœ‰ç›®æ ‡ç‚¹çš„åæ ‡ï¼Œå¹¶æ‰¾åˆ°å¯¹åº”çš„è·¯ç½‘èŠ‚ç‚¹
    target_nodes = []
    for poi in target_points:
        poi_lat = poi['location']['lat']
        poi_lng = poi['location']['lng']
        target_node = self.graph.find_nearest_node(poi_lat, poi_lng)
        target_nodes.append(target_node)
    
    # Step 3: æ‰§è¡Œå•æºå¤šç›®æ ‡Dijkstraç®—æ³•
    # å…³é”®ä¼˜åŒ–ï¼šä¸€æ¬¡è®¡ç®—è·å¾—åˆ°æ‰€æœ‰ç›®æ ‡ç‚¹çš„è·ç¦»
    distances = self.dijkstra_multi_target(
        start_node,           # èµ·å§‹èŠ‚ç‚¹
        target_nodes,         # æ‰€æœ‰ç›®æ ‡èŠ‚ç‚¹
        optimize_for          # ä¼˜åŒ–ç›®æ ‡ï¼ˆè·ç¦»æˆ–æ—¶é—´ï¼‰
    )
    
    # Step 4: å°†è®¡ç®—ç»“æœé™„åŠ åˆ°POIå¯¹è±¡ä¸­
    for i, poi in enumerate(target_points):
        target_node = target_nodes[i]
        calculated_value = distances.get(target_node, float('inf'))
        
        # æ ¹æ®ä¼˜åŒ–ç›®æ ‡è®¾ç½®ç›¸åº”çš„å€¼
        if optimize_for == 'distance':
            poi['value1'] = calculated_value  # è®¾ç½®è·ç¦»å€¼
        else:
            poi['value2'] = calculated_value  # è®¾ç½®æ—¶é—´å€¼
    
    return target_points
            </div>
    start_lng = float(lng_str.strip())
    start_node = self.get_nearest_node(start_lat, start_lng)
    
    # 2. è·å–æ‰€æœ‰ç›®æ ‡ç‚¹çš„æœ€è¿‘èŠ‚ç‚¹
    target_nodes = []
    for point in target_points:
        try:
            target_lat = point["location"]["lat"]
            target_lng = point["location"]["lng"]
            target_node = self.get_nearest_node(target_lat, target_lng)
            target_nodes.append(target_node)
        except (KeyError, TypeError) as e:
            print(f"è§£æç›®æ ‡ç‚¹åæ ‡å¤±è´¥: {e}")
            target_nodes.append(None)
    
    # 3. æ‰§è¡Œå•æºå¤šç›®æ ‡Dijkstraç®—æ³•
    distances = self._dijkstra_multi_target(
        start_node, 
        target_nodes, 
        optimize_for
    )
    
    # 4. å°†è·ç¦»ç»“æœå†™å…¥POIå¯¹è±¡ï¼ˆä¿ç•™ä¸€ä½å°æ•°ï¼‰
    for i, point in enumerate(target_points):
        if target_nodes[i] is not None:
            value = distances.get(target_nodes[i], float('inf'))
            point["value1"] = round(value, 1) if value != float('inf') else float('inf')
        else:
            point["value1"] = float('inf')
    
    return target_points
            </div>

            <h3>âš¡ å¿«é€Ÿæ’åºç®—æ³•</h3>
            
            <p>POIåˆ—è¡¨ä½¿ç”¨æ”¹è¿›çš„å¿«é€Ÿæ’åºç®—æ³•ï¼Œæ”¯æŒåŒé‡æ’åºæ¡ä»¶ï¼š</p>
            <ul>
                <li><strong>ä¸»æ’åºé”®ï¼š</strong>value1ï¼ˆè·ç¦»ï¼‰ï¼Œé™åºæ’åˆ—</li>
                <li><strong>æ¬¡æ’åºé”®ï¼š</strong>value2ï¼ˆè¯„åˆ†ï¼‰ï¼Œé™åºæ’åˆ—</li>
            </ul>            <div class="code-block">
def partition(arr, low, high, sort_key=None):
    """
    å¿«é€Ÿæ’åºçš„åˆ†åŒºå‡½æ•°ï¼Œæ”¯æŒåŒé‡æ’åºæ¡ä»¶
    
    Args:
        arr (List[dict]): è¦æ’åºçš„POIåˆ—è¡¨
        low (int): èµ·å§‹ç´¢å¼•
        high (int): ç»“æŸç´¢å¼•
        sort_key (str): ä¸»æ’åºé”®ï¼ˆ'value1'æˆ–'value2'ï¼‰
    
    Returns:
        int: åˆ†åŒºç‚¹ç´¢å¼•
    
    æ’åºç­–ç•¥ï¼š
        - ä¸»æ’åºé”®ï¼šé™åºæ’åˆ—ï¼ˆè·ç¦»è¿‘çš„æ’å‰é¢ï¼‰
        - æ¬¡æ’åºé”®ï¼šé™åºæ’åˆ—ï¼ˆè¯„åˆ†é«˜çš„æ’å‰é¢ï¼‰
    """
    
    # Step 1: é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼ˆpivotï¼‰
    pivot_element = arr[high]
    i = low - 1  # ç»´æŠ¤å°äºç­‰äºåŸºå‡†å€¼çš„å…ƒç´ çš„è¾¹ç•Œ
    
    # Step 2: ç¡®å®šä¸»æ’åºé”®å’Œæ¬¡æ’åºé”®
    primary_key_name = 'value1'    # é»˜è®¤æŒ‰è·ç¦»æ’åº
    secondary_key_name = 'value2'  # æ¬¡è¦æŒ‰è¯„åˆ†æ’åº
    
    if sort_key == 'value2':
        primary_key_name = 'value2'    # æŒ‰è¯„åˆ†æ’åº
        secondary_key_name = 'value1'  # æ¬¡è¦æŒ‰è·ç¦»æ’åº
    
    # Step 3: åˆ†åŒºè¿‡ç¨‹ï¼šéå†æ•°ç»„è¿›è¡Œå…ƒç´ åˆ†åŒº
    for j in range(low, high):
        should_swap = False
        
        # ä¸»æ’åºé”®æ¯”è¾ƒï¼ˆé™åºæ’åˆ—ï¼‰
        if arr[j][primary_key_name] > pivot_element[primary_key_name]:
            should_swap = True
        elif arr[j][primary_key_name] == pivot_element[primary_key_name]:
            # ä¸»æ’åºé”®ç›¸åŒæ—¶ï¼Œæ¯”è¾ƒæ¬¡æ’åºé”®ï¼ˆé™åºæ’åˆ—ï¼‰
            if arr[j][secondary_key_name] >= pivot_element[secondary_key_name]:
                should_swap = True
        
        # Step 4: æ‰§è¡Œäº¤æ¢æ“ä½œ
        if should_swap:
            i = i + 1
            arr[i], arr[j] = arr[j], arr[i]
    
    # Step 5: å°†åŸºå‡†å€¼æ”¾åˆ°æ­£ç¡®çš„åˆ†åŒºä½ç½®
    arr[i + 1], arr[high] = arr[high], arr[i + 1]
    
    return i + 1  # è¿”å›åˆ†åŒºç‚¹ç´¢å¼•
            </div>

            <h3>ğŸ”€ Kè·¯å½’å¹¶ç®—æ³•</h3>
            
            <p>ç”¨äºåˆå¹¶å¤šç§POIç±»å‹çš„ç»“æœï¼Œä¿æŒæ•´ä½“æœ‰åºæ€§ï¼š</p>            <div class="code-block">
def k_way_merge_descending(list_of_lists):
    """
    Kè·¯å½’å¹¶ç®—æ³•ï¼Œåˆå¹¶å¤šä¸ªå·²æ’åºçš„POIåˆ—è¡¨
    
    Args:
        list_of_lists (List[List[dict]]): åŒ…å«å¤šä¸ªå·²æ’åºPOIåˆ—è¡¨çš„åˆ—è¡¨
    
    Returns:
        List[dict]: åˆå¹¶åçš„å…¨å±€æœ‰åºPOIåˆ—è¡¨
    
    ç®—æ³•ç‰¹ç‚¹ï¼š
        1. ä½¿ç”¨æœ€å°å †ç»´æŠ¤å¤šè·¯å½’å¹¶çš„é¡ºåº
        2. é€šè¿‡è´Ÿå€¼è½¬æ¢å®ç°é™åºæ’åˆ—
        3. æ”¯æŒåŒé‡æ’åºæ¡ä»¶ï¼ˆè·ç¦»+è¯„åˆ†ï¼‰
        4. æ—¶é—´å¤æ‚åº¦ï¼šO(N log K)ï¼ŒNä¸ºæ€»å…ƒç´ æ•°ï¼ŒKä¸ºè·¯æ•°
    """
    
    # Step 1: è¾“å…¥æœ‰æ•ˆæ€§æ£€æŸ¥
    if not list_of_lists:
        return []

    # Step 2: åˆå§‹åŒ–æ•°æ®ç»“æ„
    min_heap = MinHeap()  # ä¼˜å…ˆé˜Ÿåˆ—
    result = []           # åˆå¹¶ç»“æœåˆ—è¡¨
    
    # Step 3: å †åˆå§‹åŒ–
    # å°†æ¯ä¸ªéç©ºåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ åŠ å…¥å †
    for i, sub_list in enumerate(list_of_lists):
        if sub_list:
            item = sub_list[0]
            # æ„å»ºå †å…ƒç´ ï¼š(è´Ÿvalue1, è´Ÿvalue2, åˆ—è¡¨ç´¢å¼•, å…ƒç´ ç´¢å¼•, åŸå§‹å¯¹è±¡)
            # ä½¿ç”¨è´Ÿå€¼æ˜¯ä¸ºäº†ç”¨æœ€å°å †å®ç°é™åºæ’åˆ—
            heap_item = (
                -item['value1'],    # è´Ÿè·ç¦»å€¼ï¼Œå®ç°é™åº
                -item['value2'],    # è´Ÿè¯„åˆ†å€¼ï¼Œå®ç°é™åº
                i,                  # æ¥æºåˆ—è¡¨çš„ç´¢å¼•
                0,                  # å½“å‰å…ƒç´ åœ¨åˆ—è¡¨ä¸­çš„ç´¢å¼•
                item               # åŸå§‹POIå¯¹è±¡
            )
            min_heap.push(heap_item)
    
    # Step 4: Kè·¯å½’å¹¶çš„æ ¸å¿ƒè¿‡ç¨‹
    # ä¸æ–­å–å‡ºå †é¡¶å…ƒç´ ï¼ˆå½“å‰æœ€ä¼˜ï¼‰ï¼Œå¹¶æ·»åŠ åç»­å…ƒç´ 
    while not min_heap.is_empty():
        # å–å‡ºå½“å‰å…¨å±€æœ€ä¼˜å…ƒç´ 
        neg_v1, neg_v2, list_idx, item_idx, current_item = min_heap.pop()
        result.append(current_item)
        
        # Step 5: æ·»åŠ åç»­å…ƒç´ åˆ°å †ä¸­
        # æ£€æŸ¥å½“å‰åˆ—è¡¨æ˜¯å¦è¿˜æœ‰åç»­å…ƒç´ 
        next_item_idx = item_idx + 1
        if next_item_idx < len(list_of_lists[list_idx]):
            next_item = list_of_lists[list_idx][next_item_idx]
            new_heap_item = (
                -next_item['value1'],   # è´Ÿè·ç¦»å€¼
                -next_item['value2'],   # è´Ÿè¯„åˆ†å€¼
                list_idx,               # åˆ—è¡¨ç´¢å¼•
                next_item_idx,          # æ–°çš„å…ƒç´ ç´¢å¼•
                next_item              # åŸå§‹POIå¯¹è±¡
            )
            min_heap.push(new_heap_item)
    
    return result
            </div>
        </div>

        <div id="data-structures" class="section">
            <h2>5. æ•°æ®ç»“æ„åˆ†æ</h2>
            
            <h3>ğŸ—ï¸ æ ¸å¿ƒæ•°æ®ç»“æ„</h3>
            
            <div class="complexity-grid">
                <div class="complexity-card">
                    <h4>ğŸ”¢ MinHeapï¼ˆæœ€å°å †ï¼‰</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>Kè·¯å½’å¹¶ç®—æ³•ä¸­çš„ä¼˜å…ˆé˜Ÿåˆ—</p>
                    <p><strong>æ“ä½œï¼š</strong>æ’å…¥ã€åˆ é™¤æœ€å°å€¼ã€å †åŒ–</p>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(log n)</p>
                </div>

                <div class="complexity-card">
                    <h4>ğŸ“Š Graphï¼ˆå›¾ç»“æ„ï¼‰</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>åœ°å›¾è·¯ç½‘çš„è¡¨ç¤º</p>
                    <p><strong>æ“ä½œï¼š</strong>é‚»å±…æŸ¥è¯¢ã€è¾¹æƒé‡è·å–</p>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(1) - O(degree)</p>
                </div>

                <div class="complexity-card">
                    <h4>ğŸ¯ MySetï¼ˆé›†åˆï¼‰</h4>
                    <p><strong>ç”¨é€”ï¼š</strong>Dijkstraç®—æ³•ä¸­çš„è®¿é—®æ ‡è®°</p>
                    <p><strong>æ“ä½œï¼š</strong>æ·»åŠ ã€æŸ¥è¯¢ã€åŒ…å«æ£€æŸ¥</p>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(1) å¹³å‡æƒ…å†µ</p>
                </div>

                <div class="complexity-card">
                    <h4>ğŸ“‹ POIå¯¹è±¡ç»“æ„</h4>
                    <p><strong>å­—æ®µï¼š</strong>name, type, location, value1, value2</p>
                    <p><strong>ç”¨é€”ï¼š</strong>å­˜å‚¨POIåŸºæœ¬ä¿¡æ¯å’Œè®¡ç®—ç»“æœ</p>
                    <p><strong>ç‰¹ç‚¹ï¼š</strong>æ”¯æŒå¤šç»´åº¦æ’åº</p>
                </div>
            </div>

            <h3>ğŸ­ POIæ•°æ®ç»“æ„è¯¦è§£</h3>            <div class="code-block">
# POIæ•°æ®ç»“æ„è¯¦è§£
poi_info = {
    # åŸºæœ¬ä¿¡æ¯å­—æ®µ
    "name": "POIåç§°",              # å…´è¶£ç‚¹åç§°ï¼ˆå¦‚"è‚¯å¾·åŸº"ï¼‰
    "type": "POIç±»å‹",              # ç±»åˆ«æ ‡è¯†ï¼ˆå¦‚"é¤å…"ã€"é…’åº—"ï¼‰
    "address": "è¯¦ç»†åœ°å€",           # å®Œæ•´åœ°å€ä¿¡æ¯
    
    # è¡Œæ”¿åŒºåˆ’ä¿¡æ¯
    "province": "çœä»½",             # çœçº§è¡Œæ”¿åŒºï¼ˆå¦‚"å¹¿ä¸œçœ"ï¼‰
    "city": "åŸå¸‚",                # å¸‚çº§è¡Œæ”¿åŒºï¼ˆå¦‚"æ·±åœ³å¸‚"ï¼‰
    "area": "åŒºåŸŸ",                # åŒºçº§è¡Œæ”¿åŒºï¼ˆå¦‚"å—å±±åŒº"ï¼‰
    
    # è”ç³»æ–¹å¼
    "telephone": "è”ç³»ç”µè¯",         # å•†å®¶è”ç³»ç”µè¯
    
    # åœ°ç†åæ ‡ä¿¡æ¯ï¼ˆWGS84åæ ‡ç³»ï¼‰
    "location": {
        "lat": 22.547123,          # çº¬åº¦åæ ‡ï¼ˆæµ®ç‚¹æ•°ï¼‰
        "lng": 114.085947          # ç»åº¦åæ ‡ï¼ˆæµ®ç‚¹æ•°ï¼‰
    },
    
    # è®¡ç®—å­—æ®µï¼ˆç³»ç»Ÿè¿è¡Œæ—¶æ·»åŠ ï¼‰
    "value1": 1250.5,              # è·¯å¾„è·ç¦»ï¼ˆå•ä½ï¼šç±³ï¼‰
    "value2": 4.2                  # è¯„åˆ†æˆ–å…¶ä»–æŒ‡æ ‡ï¼ˆ0-5åˆ†ï¼‰
}

# åæ ‡ç³»ç»Ÿè½¬æ¢è¯´æ˜
# è¾“å…¥ï¼šWGS84åæ ‡ç³»ï¼ˆGPSæ ‡å‡†åæ ‡ï¼‰
# å†…éƒ¨ï¼šç»Ÿä¸€ä½¿ç”¨WGS84è¿›è¡Œè®¡ç®—
# APIè°ƒç”¨ï¼šè‡ªåŠ¨è½¬æ¢ä¸ºGCJ02ï¼ˆç™¾åº¦åœ°å›¾è¦æ±‚ï¼‰
# è¾“å‡ºï¼šè½¬æ¢å›WGS84åæ ‡ç³»
            </div>

            <div class="note">
                <strong>ğŸ“ åæ ‡ç³»ç»Ÿè¯´æ˜ï¼š</strong>ç³»ç»Ÿå†…éƒ¨ç»Ÿä¸€ä½¿ç”¨WGS84åæ ‡ç³»ç»Ÿï¼Œåœ¨è°ƒç”¨ç™¾åº¦åœ°å›¾APIæ—¶è‡ªåŠ¨è½¬æ¢ä¸ºGCJ02åæ ‡ç³»ç»Ÿï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œè®¡ç®—ç²¾åº¦ã€‚
            </div>
        </div>

        <div id="complexity-analysis" class="section">
            <h2>6. å¤æ‚åº¦åˆ†æ</h2>
            
            <h3>â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>ç®—æ³•/æ“ä½œ</th>
                        <th>æœ€å¥½æƒ…å†µ</th>
                        <th>å¹³å‡æƒ…å†µ</th>
                        <th>æœ€åæƒ…å†µ</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>POIæœç´¢ï¼ˆå•æ¬¡APIè°ƒç”¨ï¼‰</td>
                        <td>O(1)</td>
                        <td>O(1)</td>
                        <td>O(1)</td>
                        <td>ç½‘ç»œè¯·æ±‚ï¼Œä¸æ•°æ®é‡æ— å…³</td>
                    </tr>
                    <tr>
                        <td>å¿«é€Ÿæ’åº</td>
                        <td>O(n log n)</td>
                        <td>O(n log n)</td>
                        <td>O(nÂ²)</td>
                        <td>nä¸ºPOIæ•°é‡</td>
                    </tr>
                    <tr>
                        <td>Dijkstraå¤šç›®æ ‡</td>
                        <td>O((V + E) log V)</td>
                        <td>O((V + E) log V)</td>
                        <td>O((V + E) log V)</td>
                        <td>Vä¸ºèŠ‚ç‚¹æ•°ï¼ŒEä¸ºè¾¹æ•°</td>
                    </tr>
                    <tr>
                        <td>Kè·¯å½’å¹¶</td>
                        <td>O(n log k)</td>
                        <td>O(n log k)</td>
                        <td>O(n log k)</td>
                        <td>nä¸ºæ€»å…ƒç´ æ•°ï¼Œkä¸ºåˆ—è¡¨æ•°</td>
                    </tr>
                    <tr>
                        <td>åæ ‡è½¬æ¢</td>
                        <td>O(1)</td>
                        <td>O(1)</td>
                        <td>O(1)</td>
                        <td>æ•°å­¦è®¡ç®—ï¼Œå¸¸æ•°æ—¶é—´</td>
                    </tr>
                </tbody>
            </table>

            <h3>ğŸ’¾ ç©ºé—´å¤æ‚åº¦åˆ†æ</h3>
            
            <div class="complexity-grid">
                <div class="complexity-card">
                    <h4>POIå­˜å‚¨ç©ºé—´</h4>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(n Ã— m)</p>
                    <p><strong>è¯´æ˜ï¼š</strong>nä¸ºPOIæ•°é‡ï¼Œmä¸ºæ¯ä¸ªPOIçš„å±æ€§æ•°é‡</p>
                </div>

                <div class="complexity-card">
                    <h4>Dijkstraç®—æ³•ç©ºé—´</h4>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(V + E)</p>
                    <p><strong>è¯´æ˜ï¼š</strong>Vä¸ºå›¾èŠ‚ç‚¹æ•°ï¼ŒEä¸ºè¾¹æ•°</p>
                </div>

                <div class="complexity-card">
                    <h4>å †ç©ºé—´å ç”¨</h4>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(k)</p>
                    <p><strong>è¯´æ˜ï¼š</strong>kä¸ºå‚ä¸å½’å¹¶çš„åˆ—è¡¨æ•°é‡</p>
                </div>

                <div class="complexity-card">
                    <h4>æ€»ä½“ç©ºé—´å¤æ‚åº¦</h4>
                    <p><strong>å¤æ‚åº¦ï¼š</strong>O(n Ã— m + V + E)</p>
                    <p><strong>è¯´æ˜ï¼š</strong>ä¸»è¦ç”±POIæ•°æ®å’Œå›¾ç»“æ„å†³å®š</p>
                </div>
            </div>

            <h3>ğŸ“ˆ æ€§èƒ½ç‰¹å¾åˆ†æ</h3>
            
            <div class="highlight">
                <h4>ğŸš€ ä¼˜åŒ–äº®ç‚¹</h4>
                <ul>
                    <li><strong>å•æºå¤šç›®æ ‡ä¼˜åŒ–ï¼š</strong>ä¸€æ¬¡Dijkstraè®¡ç®—è·å¾—æ‰€æœ‰POIè·ç¦»ï¼Œé¿å…næ¬¡å•ç‹¬è®¡ç®—</li>
                    <li><strong>å»¶è¿Ÿåˆå§‹åŒ–ï¼š</strong>Dijkstraè·¯ç”±å™¨æŒ‰éœ€åˆ›å»ºï¼Œå‡å°‘å†…å­˜å ç”¨</li>
                    <li><strong>åˆ†é¡µæŸ¥è¯¢ï¼š</strong>æ”¯æŒAPIåˆ†é¡µï¼Œé¿å…ä¸€æ¬¡åŠ è½½å¤§é‡æ•°æ®</li>
                    <li><strong>å¤±è´¥å›é€€ï¼š</strong>Dijkstraå¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°ç›´çº¿è·ç¦»è®¡ç®—</li>
                    <li><strong>åæ ‡ç¼“å­˜ï¼š</strong>æœ€è¿‘èŠ‚ç‚¹æŸ¥è¯¢ç»“æœå¯è¢«å¤ç”¨</li>
                </ul>
            </div>

            <div class="algorithm-box">
                <h4>ğŸ¯ å®é™…æ€§èƒ½è¡¨ç°</h4>
                <p><strong>å…¸å‹åœºæ™¯ï¼š</strong>æŸ¥è¯¢åŠå¾„500ç±³å†…çš„10ç§POIç±»å‹ï¼Œæ¯ç§è¿”å›20ä¸ªç»“æœ</p>
                <ul>
                    <li>APIè°ƒç”¨æ—¶é—´ï¼š100-300msï¼ˆç½‘ç»œå»¶è¿Ÿï¼‰</li>
                    <li>Dijkstraè®¡ç®—ï¼š50-200msï¼ˆå–å†³äºå›¾è§„æ¨¡ï¼‰</li>
                    <li>æ’åºå’Œå½’å¹¶ï¼š<10msï¼ˆæ•°æ®é‡è¾ƒå°ï¼‰</li>
                    <li>æ€»å“åº”æ—¶é—´ï¼š200-500ms</li>
                </ul>
            </div>
        </div>

        <div id="workflow" class="section">
            <h2>7. å·¥ä½œæµç¨‹å›¾</h2>
            
            <h3>ğŸ”„ å®Œæ•´POIæŸ¥è¯¢ä¸æ’åºæµç¨‹</h3>
              <div class="mermaid">
                graph LR
                    A[ğŸš€ç”¨æˆ·æŸ¥è¯¢è¯·æ±‚] --> B{ğŸ“‹è¯·æ±‚ç±»å‹}
                    
                    B -->|å•ä¸€| C[ğŸ”Keywordæ¥å£]
                    B -->|å…¨éƒ¨| D[ğŸ“All POIæ¥å£]
                    B -->|æ™¯ç‚¹| E[ğŸ›ï¸Spotæ¥å£]
                    
                    C --> F[ğŸ“¡POIæœç´¢]
                    D --> G[âš™ï¸è·å–é…ç½®] --> I[ğŸ”„éå†ç±»å‹] --> J[âš¡å¹¶å‘æŸ¥è¯¢]
                    E --> H[ğŸ“Œè·å–ä½ç½®] --> F
                    J --> F
                    
                    F --> K[ğŸ”§åæ ‡è½¬æ¢WGS84â†’GCJ02] --> L[ğŸŒAPIè¯·æ±‚] --> M{âœ…æˆåŠŸ?}
                    M -->|âŒ| N[ğŸš«ç©ºç»“æœ] --> Z[ğŸ“¤è¿”å›]
                    M -->|âœ…| O[ğŸ“Šè§£æå“åº”] --> P[ğŸ”„åæ ‡è½¬æ¢GCJ02â†’WGS84] --> Q[ğŸ“¦æ„å»ºPOIåˆ—è¡¨]
                    
                    Q --> R{ğŸ›£ï¸è®¡ç®—è·ç¦»?}
                    R -->|âŒ| S[ğŸ“é»˜è®¤è·ç¦»] --> T[ğŸ¯åˆå¹¶ç»“æœ]
                    R -->|âœ…| U[ğŸš—Dijkstraåˆå§‹åŒ–] --> V{âš¡å¯ç”¨?}
                    V -->|âŒ| W[ğŸ“ç›´çº¿è·ç¦»] --> T
                    V -->|âœ…| X[ğŸ¯å¤šç›®æ ‡ç®—æ³•] --> Y[ğŸ“Šè·ç¦»è®¡ç®—] --> T
                    
                    T --> AA[âš¡å¿«é€Ÿæ’åº] --> BB{ğŸ”€éœ€è¦å½’å¹¶?}
                    BB -->|å•ä¸€| CC[ğŸ”„åè½¬åˆ—è¡¨] --> Z
                    BB -->|å¤šç±»å‹| DD[ğŸ—ï¸Kè·¯å½’å¹¶] --> EE[ğŸ“ˆå †æ’åº] --> FF[âœ¨æœ€ç»ˆåˆ—è¡¨] --> CC
                    
                    classDef startEnd fill:#e8f5e8,stroke:#2e7d32,stroke-width:3px
                    classDef process fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
                    classDef decision fill:#fff3e0,stroke:#f57c00,stroke-width:2px
                    classDef algorithm fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
                    classDef error fill:#ffebee,stroke:#c62828,stroke-width:2px
                    
                    class A,Z startEnd
                    class F,K,L,O,P,Q,S,T,AA,CC,FF process
                    class B,M,R,V,BB decision
                    class U,X,Y,DD,EE algorithm
                    class N,W error
            </div>

            <h3>ğŸ¯ å…³é”®å†³ç­–ç‚¹è¯´æ˜</h3>
            
            <h3>ğŸ”§ æ ¸å¿ƒç®—æ³•å…³ç³»å›¾</h3>
            <div class="mermaid">
                graph TB
                    subgraph "ğŸ” POIæœç´¢å±‚"
                        A1[ç™¾åº¦åœ°å›¾API] -.-> A2[åæ ‡è½¬æ¢]
                        A2 -.-> A3[POIæ•°æ®è·å–]
                    end
                    
                    subgraph "ğŸ“Š è·ç¦»è®¡ç®—å±‚"
                        B1[Dijkstraç®—æ³•] --> B2[è·¯ç½‘è·ç¦»]
                        B3[ç›´çº¿è·ç¦»] --> B2
                        B1 -.->|å¤±è´¥å›é€€| B3
                    end
                    
                    subgraph "ğŸ”€ æ’åºå½’å¹¶å±‚"
                        C1[å¿«é€Ÿæ’åº] --> C2[Kè·¯å½’å¹¶]
                        C2 --> C3[MinHeapä¼˜åŒ–]
                    end
                    
                    A3 --> B1
                    A3 --> B3
                    B2 --> C1
                    
                    classDef search fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
                    classDef calc fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
                    classDef sort fill:#fff3e0,stroke:#ff9800,stroke-width:2px
                    
                    class A1,A2,A3 search                    class B1,B2,B3 calc
                    class C1,C2,C3 sort
            </div>

            <h3>ğŸ—ï¸ æ•°æ®ç»“æ„äº¤äº’å›¾</h3>
            <div class="mermaid">
                flowchart LR
                    A[ğŸ“POIå¯¹è±¡] --> B[ğŸ“ŠMinHeap]
                    A --> C[ğŸŒGraphè·¯ç½‘]
                    A --> D[ğŸ¯MySeté›†åˆ]
                    
                    B --> E[ğŸ”€Kè·¯å½’å¹¶]
                    C --> F[ğŸ›£ï¸Dijkstra]
                    D --> F
                    
                    E --> G[ğŸ“‹æœ‰åºåˆ—è¡¨]
                    F --> G
                    
                    style A fill:#ffebee,stroke:#d32f2f
                    style B fill:#e8f5e8,stroke:#388e3c
                    style C fill:#e3f2fd,stroke:#1976d2
                    style D fill:#fff3e0,stroke:#f57c00
                    style E fill:#f3e5f5,stroke:#7b1fa2
                    style F fill:#fce4ec,stroke:#c2185b
                    style G fill:#fff8e1,stroke:#fbc02d
            </div>
            
            <div class="workflow-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <strong>è¯·æ±‚ç±»å‹åˆ¤æ–­ï¼š</strong>æ ¹æ®URLè·¯å¾„ç¡®å®šæŸ¥è¯¢èŒƒå›´ï¼ˆå•ä¸€ç±»å‹ã€æ‰€æœ‰ç±»å‹ã€ç‰¹å®šæ™¯ç‚¹ï¼‰
                </div>
            </div>

            <div class="workflow-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <strong>APIè°ƒç”¨æˆåŠŸæ£€æŸ¥ï¼š</strong>éªŒè¯ç™¾åº¦åœ°å›¾APIå“åº”çŠ¶æ€ï¼Œå¤„ç†ç½‘ç»œå¼‚å¸¸å’ŒAPIé™åˆ¶
                </div>
            </div>

            <div class="workflow-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <strong>è·ç¦»è®¡ç®—ç­–ç•¥ï¼š</strong>ä¼˜å…ˆä½¿ç”¨Dijkstraç®—æ³•ï¼Œå¤±è´¥æ—¶å›é€€åˆ°ç›´çº¿è·ç¦»
                </div>
            </div>

            <div class="workflow-step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <strong>å½’å¹¶å¿…è¦æ€§åˆ¤æ–­ï¼š</strong>å¤šç±»å‹æŸ¥è¯¢éœ€è¦Kè·¯å½’å¹¶ï¼Œå•ç±»å‹ç›´æ¥æ’åºå³å¯
                </div>
            </div>
        </div>

        <div id="performance" class="section">
            <h2>8. æ€§èƒ½ä¼˜åŒ–</h2>
            
            <h3>ğŸš€ å·²å®ç°çš„ä¼˜åŒ–ç­–ç•¥</h3>
            
            <div class="complexity-grid">
                <div class="complexity-card">
                    <h4>ç®—æ³•å±‚é¢ä¼˜åŒ–</h4>
                    <ul>
                        <li>å•æºå¤šç›®æ ‡Dijkstra</li>
                        <li>å¿«é€Ÿæ’åºåŒé‡æ¡ä»¶</li>
                        <li>Kè·¯å½’å¹¶å‡å°‘æ¯”è¾ƒ</li>
                        <li>å †ä¼˜åŒ–çš„ä¼˜å…ˆé˜Ÿåˆ—</li>
                    </ul>
                </div>

                <div class="complexity-card">
                    <h4>ç³»ç»Ÿæ¶æ„ä¼˜åŒ–</h4>
                    <ul>
                        <li>å»¶è¿Ÿåˆå§‹åŒ–ç»„ä»¶</li>
                        <li>å¤±è´¥è‡ªåŠ¨å›é€€æœºåˆ¶</li>
                        <li>åˆ†å±‚æ¨¡å—åŒ–è®¾è®¡</li>
                        <li>å¼‚å¸¸å¤„ç†æœºåˆ¶</li>
                    </ul>
                </div>

                <div class="complexity-card">
                    <h4>æ•°æ®å¤„ç†ä¼˜åŒ–</h4>
                    <ul>
                        <li>åæ ‡ç³»ç»Ÿä¸€è½¬æ¢</li>
                        <li>APIåˆ†é¡µæŸ¥è¯¢</li>
                        <li>ç»“æœç¼“å­˜æœºåˆ¶</li>
                        <li>æ•°æ®ç»“æ„ä¼˜åŒ–</li>
                    </ul>
                </div>

                <div class="complexity-card">
                    <h4>ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h4>
                    <ul>
                        <li>å¿«é€Ÿå“åº”æœºåˆ¶</li>
                        <li>é”™è¯¯å‹å¥½æç¤º</li>
                        <li>æ¸è¿›å¼æ•°æ®åŠ è½½</li>
                        <li>æ™ºèƒ½æ’åºå±•ç¤º</li>
                    </ul>
                </div>
            </div>

            <h3>ğŸ“Š æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>ä¼˜åŒ–é¡¹ç›®</th>
                        <th>ä¼˜åŒ–å‰</th>
                        <th>ä¼˜åŒ–å</th>
                        <th>æå‡æ¯”ä¾‹</th>
                        <th>ä¼˜åŒ–æ–¹æ³•</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>è·ç¦»è®¡ç®—</td>
                        <td>O(n Ã— (V + E) log V)</td>
                        <td>O((V + E) log V)</td>
                        <td>nå€æå‡</td>
                        <td>å•æºå¤šç›®æ ‡ç®—æ³•</td>
                    </tr>
                    <tr>
                        <td>å¤šç±»å‹åˆå¹¶</td>
                        <td>O(nÂ² log n)</td>
                        <td>O(n log k)</td>
                        <td>æ˜¾è‘—æå‡</td>
                        <td>Kè·¯å½’å¹¶ç®—æ³•</td>
                    </tr>
                    <tr>
                        <td>å†…å­˜å ç”¨</td>
                        <td>å¸¸é©»åŠ è½½</td>
                        <td>æŒ‰éœ€åˆ›å»º</td>
                        <td>30-50%å‡å°‘</td>
                        <td>å»¶è¿Ÿåˆå§‹åŒ–</td>
                    </tr>
                    <tr>
                        <td>é”™è¯¯å¤„ç†</td>
                        <td>ç³»ç»Ÿå´©æºƒ</td>
                        <td>ä¼˜é›…é™çº§</td>
                        <td>100%å¯ç”¨æ€§</td>
                        <td>å¼‚å¸¸æ•è·+å›é€€</td>
                    </tr>
                </tbody>
            </table>

            <h3>ğŸ”® è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®</h3>
            
            <div class="highlight">
                <h4>ğŸ¯ å¯å®æ–½ä¼˜åŒ–æ–¹æ¡ˆ</h4>
                <ul>
                    <li><strong>ç¼“å­˜æœºåˆ¶ï¼š</strong>ç¼“å­˜çƒ­ç‚¹åŒºåŸŸçš„POIæŸ¥è¯¢ç»“æœï¼Œå‡å°‘APIè°ƒç”¨</li>
                    <li><strong>å¹¶å‘æŸ¥è¯¢ï¼š</strong>å¤šçº¿ç¨‹å¹¶å‘è°ƒç”¨ä¸åŒç±»å‹çš„POIæŸ¥è¯¢</li>
                    <li><strong>é¢„è®¡ç®—ï¼š</strong>å¯¹çƒ­é—¨æ™¯ç‚¹é¢„è®¡ç®—å‘¨è¾¹POIï¼Œæé«˜å“åº”é€Ÿåº¦</li>
                    <li><strong>æ™ºèƒ½åˆ†é¡µï¼š</strong>æ ¹æ®ç”¨æˆ·è¡Œä¸ºåŠ¨æ€è°ƒæ•´åˆ†é¡µå¤§å°</li>
                    <li><strong>ç»“æœé¢„æµ‹ï¼š</strong>åŸºäºå†å²æ•°æ®é¢„æµ‹ç”¨æˆ·å¯èƒ½æ„Ÿå…´è¶£çš„POIç±»å‹</li>
                </ul>
            </div>

            <div class="note">
                <strong>âš¡ æ€§èƒ½ç›‘æ§å»ºè®®ï¼š</strong>å»ºè®®æ·»åŠ æ€§èƒ½ç›‘æ§æŒ‡æ ‡ï¼ŒåŒ…æ‹¬APIå“åº”æ—¶é—´ã€ç®—æ³•æ‰§è¡Œæ—¶é—´ã€å†…å­˜ä½¿ç”¨é‡ç­‰ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°å’Œè§£å†³æ€§èƒ½ç“¶é¢ˆã€‚
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“‹ æ€»ç»“</h2>
            
            <div class="highlight">
                <h3>ğŸ¯ ç³»ç»Ÿä¼˜åŠ¿</h3>
                <ul>
                    <li><strong>æ™ºèƒ½ç®—æ³•ï¼š</strong>ç»“åˆå¤šç§é«˜æ•ˆç®—æ³•å®ç°POIæ™ºèƒ½æ’åº</li>
                    <li><strong>çœŸå®è·ç¦»ï¼š</strong>åŸºäºè·¯ç½‘çš„çœŸå®è·¯å¾„è·ç¦»è®¡ç®—ï¼Œè€Œéç›´çº¿è·ç¦»</li>
                    <li><strong>å¤šç»´æ’åºï¼š</strong>æ”¯æŒè·ç¦»ã€è¯„åˆ†ç­‰å¤šç»´åº¦ç»¼åˆæ’åº</li>
                    <li><strong>é«˜å¯ç”¨æ€§ï¼š</strong>å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé™çº§æœºåˆ¶</li>
                    <li><strong>æ‰©å±•æ€§å¼ºï¼š</strong>æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°çš„POIç±»å‹å’Œæ’åºè§„åˆ™</li>
                </ul>
            </div>

            <div class="algorithm-box">
                <h4>ğŸ“ˆ æŠ€æœ¯åˆ›æ–°ç‚¹</h4>
                <ul>
                    <li>å•æºå¤šç›®æ ‡Dijkstraç®—æ³•çš„åˆ›æ–°åº”ç”¨</li>
                    <li>Kè·¯å½’å¹¶åœ¨POIåˆå¹¶ä¸­çš„é«˜æ•ˆå®ç°</li>
                    <li>åæ ‡ç³»è½¬æ¢çš„è‡ªåŠ¨åŒ–å¤„ç†</li>
                    <li>åˆ†å±‚æ¶æ„çš„ä¼˜é›…è®¾è®¡</li>
                </ul>
            </div>            <p style="text-align: center; font-style: italic; color: #7f8c8d; margin-top: 40px;">
                æœ¬åˆ†ææŠ¥å‘Šè¯¦ç»†æ¢³ç†äº†POIç‚¹æŸ¥è¯¢ä¸æ’åºç³»ç»Ÿçš„è®¾è®¡ç†å¿µã€æŠ€æœ¯å®ç°å’Œæ€§èƒ½ç‰¹å¾ï¼Œ<br>
                ä¸ºç³»ç»Ÿä¼˜åŒ–å’ŒåŠŸèƒ½æ‰©å±•æä¾›äº†å…¨é¢çš„æŠ€æœ¯å‚è€ƒã€‚
            </p>

            <div style="margin-top: 30px; padding: 15px; background: rgba(52, 152, 219, 0.1); border-left: 4px solid #3498db; border-radius: 8px;">
                <p style="margin: 0; color: #2980b9; font-weight: 500;">
                    ğŸ¨ <strong>å›¾è¡¨ä¼˜åŒ–è¯´æ˜ï¼š</strong>å·²å°†åŸæœ‰çš„å†—é•¿å‚ç›´æµç¨‹å›¾ä¼˜åŒ–ä¸ºç´§å‡‘çš„æ°´å¹³å¸ƒå±€ï¼Œ
                    æ–°å¢ç®—æ³•å…³ç³»å›¾å’Œæ•°æ®ç»“æ„äº¤äº’å›¾ï¼Œæå‡äº†ç©ºé—´åˆ©ç”¨ç‡å’Œå¯è¯»æ€§ã€‚
                    ä½¿ç”¨emojiå›¾æ ‡å’Œç®€æ´å‘½åï¼Œä½¿æµç¨‹æ›´åŠ ç›´è§‚æ˜“æ‡‚ã€‚
                </p>
            </div>
        </div>
    </div>
</body>
</html>
